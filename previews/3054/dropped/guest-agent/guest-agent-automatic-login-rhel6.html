<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>oVirt guest agent automatic login RHEL6 | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="oVirt guest agent automatic login RHEL6" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3054/dropped/guest-agent/guest-agent-automatic-login-rhel6.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3054/dropped/guest-agent/guest-agent-automatic-login-rhel6.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="oVirt guest agent automatic login RHEL6" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"oVirt guest agent automatic login RHEL6","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3054/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/3054/dropped/guest-agent/guest-agent-automatic-login-rhel6.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3054/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3054/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3054/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3054/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3054/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3054/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3054/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3054/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3054/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3054/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3054/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3054/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3054/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3054/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3054/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3054/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3054/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3054/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3054/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3054/documentation/'>Documentation</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3054/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3054/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3054//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3054//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3054/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3054/dropped/">
              <span property="name">Dropped</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3054/dropped/guest-agent/">
              <span property="name">Guest Agent</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/f2a780691e3b42529b31c3845bd121ce?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/f2a780691e3b42529b31c3845bd121ce?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Barak Azulay">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Barak Azulay</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          
<!-- TODO: Content review -->

<h1 id="ovirt-guest-agent-automatic-login-rhel6">oVirt guest agent automatic login RHEL6</h1>

<h2 id="automatic-login-on-rhel6">Automatic login on RHEL6</h2>

<p>The automatic login on RHEL6 is based on three components:</p>

<ol>
  <li>The RHEV-Agent which handles the user’s credentials and workflow.</li>
  <li>A greeter’s plug-in which allows interaction with the desktop manager.</li>
  <li>A PAM module which handles the PAM’s conversation.</li>
</ol>

<p>Currently there are two greeter’s plug-ins. One for GNOME desktop manager (GDM) and one for the KDE desktop manager (KDM).
 All of the above are included in the ovirt-guest-agent git repo</p>

<p>The flow:</p>

<ol>
  <li>The greeter’s plug-in is waiting for a signal on the D-BUS interface.</li>
  <li>The RHEV-Agent receives the user’s credentials from the VDSM through the virtio-serial device</li>
  <li>A user-authenticated signal with a one-time token is emitted by the agent.The agent also opens an abstract server socket which is used to send the user’s credentials to the PAM module.</li>
  <li>After the signal is caught by the greeter’s plug-in, the plug-in starts the PAM conversation. The plug-in doesn’t start the PAM conversation directly. It starts it by using the greeter’s interface.</li>
  <li>The PAM module starts the conversation with a query for the token. The answer to the query is given by the plug-in.</li>
  <li>The PAM module connects to the agent’s abstract server socket and sends the token.</li>
  <li>The agent verifies that the connection is allowed and the tokens match. If the connection is verified, the user’s credentials are sent to the PAM module. Otherwise, the connection is closed.</li>
  <li>The PAM module sets the user and password fields and passes them down the PAM stack (defined in the files: /etc/pam.d/gdm-rhev-cred and /etc/pam.d/kdm-rhev-cred) to perform the actual authentication.</li>
</ol>

<p><img src="/ovirt-site/previews/3054/images/wiki/Guest-agent-sso.png" alt="" /></p>





        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3054/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3054/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3054/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3054/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/dropped/guest-agent/guest-agent-automatic-login-rhel6.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/dropped/guest-agent/guest-agent-automatic-login-rhel6.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
