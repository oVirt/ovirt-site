<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Edit Running VM | oVirt</title>
<meta name="generator" content="Jekyll v3.9.1" />
<meta property="og:title" content="Edit Running VM" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2753/develop/release-management/features/virt/edit-running-vm.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2753/develop/release-management/features/virt/edit-running-vm.html" />
<meta property="og:site_name" content="oVirt" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Edit Running VM" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2753/images/logo.svg"}},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","@type":"WebPage","headline":"Edit Running VM","url":"https://ovirt.github.io/ovirt-site/previews/2753/develop/release-management/features/virt/edit-running-vm.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2753/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2753/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2753/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2753/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2753/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2753/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2753/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2753/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2753/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2753/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2753/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <!-- Begin Jekyll Favicon tag v0.2.9 -->
<!-- Classic -->
<link rel="shortcut icon" href="/ovirt-site/previews/2753/favicon.ico">
<link rel="icon" sizes="48x48 32x32 16x16" href="/ovirt-site/previews/2753/favicon.ico">
  <link rel="icon" sizes="16x16" type="image/png" href="/ovirt-site/previews/2753/images/favicon-16x16.png">
  <link rel="icon" sizes="32x32" type="image/png" href="/ovirt-site/previews/2753/images/favicon-32x32.png">
  <link rel="icon" sizes="64x64" type="image/png" href="/ovirt-site/previews/2753/images/favicon-64x64.png">
  <link rel="icon" sizes="144x144" type="image/png" href="/ovirt-site/previews/2753/images/favicon-144x144.png">
<!-- Safari -->
  <link rel="apple-touch-icon" sizes="57x57" href="/ovirt-site/previews/2753/images/favicon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/ovirt-site/previews/2753/images/favicon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/ovirt-site/previews/2753/images/favicon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/ovirt-site/previews/2753/images/favicon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/ovirt-site/previews/2753/images/favicon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/ovirt-site/previews/2753/images/favicon-180x180.png">
<!-- Chrome -->
  <link rel="icon" sizes="192x192" href="/ovirt-site/previews/2753/images/favicon-192x192.png">
  <link rel="icon" sizes="96x96" href="/ovirt-site/previews/2753/images/favicon-96x96.png">
  <link rel="icon" sizes="48x48" href="/ovirt-site/previews/2753/images/favicon-48x48.png">
<link rel="manifest" href="/ovirt-site/previews/2753/manifest.webmanifest">
<!-- IE -->
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ovirt-site/previews/2753/images/favicon-144x144.png">
<meta name='msapplication-config' content="/ovirt-site/previews/2753/browserconfig.xml">
<!-- End Jekyll Favicon tag -->
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2753/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2753/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2753/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2753/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2753/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2753/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2753//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2753//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2753/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2753/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2753/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2753/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2753/develop/release-management/features/virt/">
              <span property="name">Virt</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <header class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/b1766f2c8efbe055218f5ccdae3bc8da?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/b1766f2c8efbe055218f5ccdae3bc8da?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Omer Frenkel</span></p>
                      
                    </section>
                  </span>
                
              </header>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/2753/documentation/'>Documentation is available here.</a></div>

<h1 id="edit-running-vm">Edit Running Vm</h1>

<h2 id="summary">Summary</h2>

<p>We would like to have ability to edit VM configuration, even while it is running.
Today, updating running vm is not clear:
Updating some fields is allowed, and makes sense (applied immediately):</p>

<ul>
  <li>description</li>
  <li>comment</li>
  <li>HA</li>
  <li>..</li>
</ul>

<p>Updating some fields is blocked, since some of the configuration values are not applicable when the vm is running:
* memory</p>

<ul>
  <li>monitors</li>
  <li>usb-policy</li>
  <li>..</li>
</ul>

<p>Updating some fields is allowed, but might be confusing, as it will be applied only on next run:</p>

<ul>
  <li>cd-rom - does not perform live change-cd in the machine</li>
  <li>boot sequence - if rebooting the guest (not stop+start) the order will not change</li>
  <li>guaranteed memory - will only be applied on next run</li>
  <li>..</li>
</ul>

<h2 id="owner">Owner</h2>

<ul>
  <li>Name: Omer Frenkel</li>
  <li>Email: ofrenkel@redhat.com</li>
</ul>

<h2 id="current-status">Current Status</h2>

<ul>
  <li>Status: Design</li>
  <li>Target release: 3.5</li>
  <li>updated: March 3rd, 2014</li>
</ul>

<h2 id="detailed-description">Detailed Description</h2>

<p>This feature will allow updating vm configuration on any vm status except ‘Locked’.
* Changes that doesn’t affect the run of the vm, will be editable as today (for example: name, description, comment..)</p>

<ul>
  <li>If change is not immediately applicable (memory, boot sequence), a warning will be displayed to the user (UI only),</li>
</ul>

<p>notifying him changes will be applied only on next run.
* If change affect running vm, and require special operation (like hot-plug cpu), the user could select if to apply immediately or only on the next run.
All vm configuration, as it is returned to the user today (using search and queries,
-&gt; what is shown in the vm main tab) will always be the current configuration.
If there is a different configuration for the next run for a vm, an icon will appear next to the VM in the grid
the detailed configuration would appear in the ‘edit vm’ dialog.</p>

<h2 id="implementation">Implementation</h2>

<p>’’’ Backend **
if vm is edited, and is not in down state, all changes that can be applied immediately will be saved to the vm_static table (and to ‘running’ snapshot if exists).
if there are other changes, create/update a special ‘running’ snapshot with all information.
when vm goes down, if ‘running’ snapshot exists, apply the configuration to the vm_static table.
** DB **
Add to VM object and view an indicator if a ‘running’ snapshot exists, for UI and REST use.
** UI **
On Edit Vm, if ‘running’ snapshot exists, load it to the edit dialog.
Show warning to the user if anything changed that require restart.
Allow the user to choose if to apply now changes that can be applied.
<img src="/ovirt-site/previews/2753/images/wiki/Edit_running_vm.png" alt="" />
On VM main grid, add an icon notifying there is a running configuration for each vm with this field true.
** REST API ‘’’
Add corresponding element for vm to notify for each vm if there is a running configuration for it.
Add a URL-parameter, ‘next_run’, to get vm, in order to be able to get the ‘running’ configuration for a VM,
and also in update vm, to allow the user to decide if to apply changes now for applicable changes.
usage:
 <a href="http://server/ovirt-engine/api/vms/vm_id;next_run">http://server/ovirt-engine/api/vms/vm_id;next_run</a></p>

<h2 id="open-issues">Open Issues</h2>

<ul>
  <li>what about changing cd rom ? will it do live change cd, or like today?</li>
</ul>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2753/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2753/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2753/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2753/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/virt/edit-running-vm.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/virt/edit-running-vm.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
