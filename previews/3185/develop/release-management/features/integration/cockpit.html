<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>CockpitOvirtPlugin | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="CockpitOvirtPlugin" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3185/develop/release-management/features/integration/cockpit.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3185/develop/release-management/features/integration/cockpit.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CockpitOvirtPlugin" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"CockpitOvirtPlugin","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3185/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/3185/develop/release-management/features/integration/cockpit.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3185/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3185/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3185/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3185/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3185/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3185/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3185/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3185/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3185/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3185/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3185/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3185/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3185/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3185/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3185/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3185/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3185/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3185/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3185/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3185/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3185/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3185/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3185//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3185//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3185/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3185/develop/">
              <span property="name">Joining the developers community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3185/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3185/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3185/develop/release-management/features/integration/">
              <span property="name">Integration</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/b3c185156bec38bc8cd834762a59e44b?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/b3c185156bec38bc8cd834762a59e44b?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Marek Libra">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Marek Libra</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3185/documentation/'>Documentation is available here.</a></div>

<h1 id="proposed-feature-40-cockpit-ovirt-plugin">Proposed Feature 4.0: Cockpit-oVirt Plugin</h1>

<h2 id="summary">Summary</h2>
<p>The oVirt’s webadmin provides complete datacenter/cluster view and it’s administration but lacks in tuning of specific hosts parameters.
Recent oVirt’s UI can be considered as comprehensive but heavy-weight, confusing for non-advanced users, resource-consuming and it’s accessibility can be limited in case of high-loaded engine.</p>

<p>This feature introduces new plugin to Cockpit which provides VM-centric monitoring and management of a host machine while taking advantage of already built-in admin functionality in the Cockpit.</p>

<h3 id="about-cockpit">About Cockpit</h3>
<p>Cockpit is a Linux system administration tool with fancy web UI, easy setup and minimal system footprint at runtime.
Cockpit’s functionality can be extended by plugins represented by html page(s), javascript, manifest file and optionally backend components.
Cockpit’s access to the host is restricted to the same privileges as shell of a logged user, i.e. via ssh.</p>

<h3 id="owner">Owner</h3>
<ul>
  <li>Name: Marek Libra</li>
  <li>Email: mlibra@redhat.com</li>
</ul>

<h3 id="benefit-to-ovirt">Benefit to oVirt</h3>
<p>User experience in using Cockpit can be described with words like ‘light-weight’, ‘targeted on action’, ‘user-friendly’ or ‘easy-to-use’.</p>

<p>The oVirt plugin represents VM-centric monitoring and troubleshooting tool of a host with easy setup.
It’s use is complimentary to the recent oVirt UIs, allowing user to easily switch among them depending on his/her actual needs.</p>

<p>Brings benefits in:</p>

<ul>
  <li>fine grained host tuning</li>
  <li>troubleshooting tool when heavy-weight UIs can’t be effectively accessed</li>
  <li>oVirt’s integration point on UI level since whole plugin or it’s parts are easily embeddable within other web applications (i.e. ManageIQ or even oVirt Webadmin)</li>
  <li>starting point for management of a small cluster setup, while deploying VDSM and so making foundation to full oVirt setup in the future when demands grows</li>
</ul>

<h3 id="dependencies">Dependencies</h3>
<p>Cockpit needs to be installed and running.</p>

<p>The plugin has dependency on the</p>

<ul>
  <li>Cockpit - needs to be installed and running</li>
  <li>VDSM running on the host.</li>
</ul>

<p>Access to oVirt’s engine is optional. When login is available, additional functionality is accessible in the plugin.</p>

<h3 id="rules-of-thumb">Rules of Thumb</h3>
<p>If functionality provided by the plugin is in contrary to the oVirt’s engine, it is either not provided or achieved via engine’s REST API call.
Despite the logged user might have access to the libvirt/VDSM on the host, the plugin shall not attempt to replace oVirt’s engine.
The plugin is meant to allow access to engine/vdsm functionality in a user-friendly way, but not actualy implement it.</p>

<p>While respecting previous rule and if possible, the VDSM is  preferred to perform host-local actions over direct calls to other components/libraries (i.e. libvirt).</p>

<p>The plugin is not meant as full replacement of UI. Just selected functionality should be provided to keep user-friendliness on mind.</p>

<h3 id="recent-status">Recent Status</h3>
<p>Please see issue tracker [2] for more details about recent issues and planed enhancements.</p>

<p>Initial implementation is on github.</p>

<h3 id="action-items">Action Items</h3>
<p>Initial implementation with basic functionality is recently on github [1].</p>

<p>High priority ongoing enhancements:</p>

<ul>
  <li>SSO (for both engine and cockpit)</li>
  <li>patternfly</li>
  <li>rpm packaging and oVirt’s repository</li>
  <li>event-driven internal data update</li>
  <li>embedding in webadmin</li>
</ul>

<p>More details and list of next planed enhancements can be found in the issue tracker, see [2]</p>

<h2 id="detailed-description">Detailed Description</h2>
<p><img src="/ovirt-site/previews/3185/images/wiki/cockpit_vmsList.png" alt="" /> 
<img src="/ovirt-site/previews/3185/images/wiki/cockpit_vmDetail.png" alt="" /> 
<img src="/ovirt-site/previews/3185/images/wiki/cockpit_vdsmConfig.png" alt="" /></p>

<h3 id="basic">Basic</h3>

<ul>
  <li>List VMs running on the host</li>
  <li>VM details with usage charts/statistics</li>
  <li>Shutdown/Force off the VM</li>
  <li>get Console</li>
  <li>edit vdsm.conf</li>
  <li>vdsmd.service management (hyperlink)</li>
</ul>

<h3 id="with-access-to-ovirts-engine">With access to oVirt’s engine</h3>
<ul>
  <li>cluster VMs list with details</li>
  <li>click-through to remote cockpit-ovirt plugin to see VM Detail</li>
  <li>run VM</li>
  <li>engine login SSO</li>
</ul>

<h3 id="general">General</h3>
<ul>
  <li>look&amp;feel supported by patternfly if not in contrary to other parts of Cockpit (recently not 100% achieved)</li>
  <li>packaged as RPM (.deb is not decided yet)</li>
  <li>access to the sub-screens (user components) via URL hashes:
    <pre>https://HOST:PORT/ovirt/ovirt#/[component]/[state]</pre>
  </li>
</ul>

<h2 id="implementation">Implementation</h2>
<p>The plugin is composed of</p>

<ul>
  <li>single HTML page (ovirt.html)
    <ul>
      <li>defines plugin’s layout</li>
    </ul>
  </li>
  <li>JavaScripts (*.js)
    <ul>
      <li>implements majority of plugin’s functionality</li>
      <li>as stated in the Rules of Thumb section, no importnant business logic is implemented on plugin’s side</li>
      <li>keeps user-session state</li>
      <li>requirements on 3rd party libraries are kept at minimum</li>
      <li>spawns the vdsmJsonRPCCli.py to get data or invoke actions on VDSM or Engine</li>
      <li>handles navigation in-/out-side of the plugin</li>
      <li>sensitive information (like engine’s token) are stored in the Window.sessionStorage</li>
    </ul>
  </li>
  <li>backend (vdsmJsonRPCCli.py)
    <ul>
      <li>runs on the host under cockpit’s logged user privileges</li>
      <li>connects to VDSM via JSON RPC (utilizes jsonrpcvdscli.py)</li>
      <li>stateless</li>
      <li>bridges connection to the Engine
        <ul>
          <li>has access to engine’s SSL certificate</li>
          <li>browser does not require access to the engine</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Cockpit namely provides:
    <ul>
      <li>authentication</li>
      <li>basic libraries (jquery, mustache)</li>
      <li>CSS (reused as much as possible)</li>
      <li>management and monitoring of the host and related services (networking, storage, system services, etc)</li>
    </ul>
  </li>
</ul>

<h3 id="installationupgrade">Installation/Upgrade</h3>
<p>Refer the plugin’s README file for install instructions.</p>

<h2 id="external-links">External links</h2>
<ul>
  <li><a href="https://github.com/mareklibra/cockpit-ovirt">The plugin on github</a></li>
  <li><a href="https://github.com/mareklibra/cockpit-ovirt/issues">The Issue Tracker</a></li>
  <li><a href="https://github.com/mareklibra/cockpit-ovirt/blob/master/README.md">The Plugin’s README.md</a></li>
  <li><a href="http://cockpit-project.org/">The Cockpit project</a></li>
</ul>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3185/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3185/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3185/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3185/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2024 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/integration/cockpit.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/integration/cockpit.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
