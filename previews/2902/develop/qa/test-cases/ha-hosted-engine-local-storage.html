<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>TestCase HA Hosted Engine Local Storage | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="TestCase HA Hosted Engine Local Storage" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2902/develop/qa/test-cases/ha-hosted-engine-local-storage.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2902/develop/qa/test-cases/ha-hosted-engine-local-storage.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="TestCase HA Hosted Engine Local Storage" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"TestCase HA Hosted Engine Local Storage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2902/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/2902/develop/qa/test-cases/ha-hosted-engine-local-storage.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2902/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2902/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2902/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2902/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2902/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2902/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2902/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2902/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2902/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2902/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2902/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/2902/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/2902/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/2902/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/2902/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/2902/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2902/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2902/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2902/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2902/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2902/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2902/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2902//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2902//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2902/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2902/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2902/develop/qa/">
              <span property="name">oVirt Quality Assurance</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2902/develop/qa/test-cases/">
              <span property="name">Test Cases</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/ded1657b31d5b6e3b2286124fe90707e?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/ded1657b31d5b6e3b2286124fe90707e?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Zordrak</span></p>
                      
                    </section>
                  </span>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          
<h1 id="testcase-ha-hosted-engine-local-storage">TestCase HA Hosted Engine Local Storage</h1>

<h2 id="description">Description</h2>

<p>Using a HA-Hosted-Engine configuration, it is still desirable to be able to configure storage on a specific host that can only be accessed by that host.</p>

<p>In my specific scenario:</p>

<p>3x High-Capacity Hypervisors with 300GiB RAID10 15kRPM SAS each. Limited inter-host connectivity. HostedEngine installed, highly available across all three hosts using NFS served by glusterd, with gluster replicating across all three hosts and CTDB managing a shared virtual IP address. This permits the management of three hosts, from a single engine interface which may run so long as one host is on-line. One additional HA VM is run for a critical customer-facing web-service using an additional replicated NFS-accessed gluster storage domain.</p>

<p>Each host is then required to run additional VMs where the storage is local:</p>

<ul>
  <li>Host A holds vdisks for VMs executed only on Host A.</li>
  <li>Host B holds vdisks for VMs executed only on Host B.</li>
  <li>Host C holds vdisks for VMs executed only on Host C.</li>
</ul>

<p>No live-migration is required or expected for the local VMs. Manual offline migration should be possible with the use of an NFS export domain (or scp file copy if oVirt can support manual export/import).</p>

<h2 id="setup">Setup</h2>

<p>Currently this is not possible because of the hard requirement that all hosts can access all storage domains even if there is no requirement for them to be used on other hosts. To configure Local Storage each host must be in unique clusters which prevents the HA-HostedEngine configuration. Simply sharing the local storage via NFS is not possible because use of gluster-nfs and native nfsd are mutually exclusive, you cannot run both. This means the only possibilities are non-replicated gluster volumes or iSCSI exposure; both similar and unnecessarily complicated solutions. given the existing use of gluster, the gluster solution is probably better.</p>

<p>So, each host creates an unreplicated gluster volume and exposes the â€œ<host>-local-data" storage domain via it's native physical IP using gluster's NFS, from where it can be used by the host on which it resides for VM backing storage.</host></p>

<p>Given the only obstacle being oVirt design architecture and not any physical or 3rd party problem, it ought to be feasible to permit each host to provide local storage only for use by itself.</p>





        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2902/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2902/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2902/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2902/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/qa/test-cases/ha-hosted-engine-local-storage.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/qa/test-cases/ha-hosted-engine-local-storage.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
