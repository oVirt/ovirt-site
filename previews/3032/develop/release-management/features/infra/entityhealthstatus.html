<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>EntityHealthStatus | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="EntityHealthStatus" />
<meta name="author" content="Eli Mesika" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3032/develop/release-management/features/infra/entityhealthstatus.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3032/develop/release-management/features/infra/entityhealthstatus.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="EntityHealthStatus" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Eli Mesika" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Eli Mesika"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"EntityHealthStatus","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3032/images/logo.svg"},"name":"Eli Mesika"},"url":"https://ovirt.github.io/ovirt-site/previews/3032/develop/release-management/features/infra/entityhealthstatus.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3032/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3032/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3032/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3032/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3032/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3032/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3032/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3032/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3032/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3032/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3032/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3032/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3032/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3032/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3032/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3032/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3032/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3032/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3032/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3032/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3032/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3032/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3032//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3032//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3032/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3032/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3032/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3032/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3032/develop/release-management/features/infra/">
              <span property="name">Infra</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/d75560fd509444e4cbc70734dffa0673?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/d75560fd509444e4cbc70734dffa0673?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Eli Mesika">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Eli Mesika</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/92517631861d6438bbc8b312cf9ef0a7?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/92517631861d6438bbc8b312cf9ef0a7?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Oved Ourfali">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Oved Ourfali</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3032/documentation/'>Documentation is available here.</a></div>

<h1 id="entity-health-status">Entity Health Status</h1>

<h2 id="adding-external-health-status-to-ovirt-entities">Adding External Health Status to oVirt Entities</h2>

<h3 id="summary">Summary</h3>

<p>Provide a mechanism to set entity health status which will be displayed in the UI as follows</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">OK</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Info  </code><img src="/ovirt-site/previews/3032/images/wiki/ExternalStatusInfo.png" alt="`ExternalStatusInfo.png`" /></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Warning </code><img src="/ovirt-site/previews/3032/images/wiki/ExternalStatusFailure.png" alt="`ExternalStatusFailure.png`" /></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Error  </code><img src="/ovirt-site/previews/3032/images/wiki/ExternalStatusWarning.png" alt="`ExternalStatusWarning.png`" /></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Failure  </code><img src="/ovirt-site/previews/3032/images/wiki/ExternalStatusError.png" alt="`ExternalStatusError.png`" /></p>
  </li>
</ul>

<p>The Health Status field will be returned as part of the retrieved entity when a call to display the entity is done using the REST API.</p>

<p>The main use-case for this new status is to provide plugins / external systems the ability to trigger issues, and allow the administrator to clearly see there is an issue through the UI</p>

<p>It will first be supported on hosts and storage domains.</p>

<h3 id="owner">Owner</h3>

<ul>
  <li>Name: Eli Mesika</li>
  <li>Email: emesika@redhat.com</li>
</ul>

<h3 id="current-status">Current status</h3>

<p>Currently oVirt provides only an internal status of the host which is controlled internally by oVirt
In order to see problems on an entity, the administrator should go and select each entity and then look in the relevant plug-in sub-tab for the entity. There is no visual marker for indicating problems on the entity that were reported by an external system</p>

<h3 id="use-case">Use Case</h3>

<p>An external system indicates a problem on an entity instance and wants to set its health status such that this status is displayed and visible immediately to the application administrator in the entity main view without any need to drill-down to each and every entity. The administrator will see in the main grid that there is an issue, and pressing on the specific entity he will either be able to look at the events sub-tab to understand what the issue is, or look at custom sub-tab provided by the plugin (if there is indeed a plugin in this specific use-case).</p>

<h3 id="detailed-description">Detailed Description</h3>

<p>The goal is to enable to add each entity a Health Status field which can be set and retrieved using the REST API
The UI should include this field for each such entity main view and displayed it graphically with the appropriate color according to the reported status</p>

<p>This will be achieved by adding a Health Status field to each relevant entity which can be set by a command on the entity instance The command parameters should have parameters that enables oVirt to generate an implicit External Event for the status transition</p>

<p>For the first phase the supported entities will be : Host and Storage Domain vds_dynamic and storage_domain_dynamic tables will have an addition health column DB Facade objects, BEs and tests will be updated accordingly</p>

<p>on REST API those entities will retrieve the health as well , for example a <strong>GET</strong> on</p>

<p><code class="language-plaintext highlighter-rouge">&lt;dir&gt;</code>
<code class="language-plaintext highlighter-rouge">/api/82d9f776-12cf-437a-b686-5958d09f9eb4</code>
results with :</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;host</span> <span class="na">id=</span><span class="s">................</span><span class="nt">&gt;</span>
           ......
           ......
     <span class="nt">&lt;external_status&gt;</span>
       <span class="nt">&lt;state&gt;</span>ok<span class="nt">&lt;/state&gt;</span>
   <span class="nt">&lt;/external_status&gt;</span>
  <span class="nt">&lt;/host&gt;</span>
</code></pre></div></div>

<p>Setting the status for a entity will be done via the External Events mechanism with an additional external_status element from the Status API type under the entity For example</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;event&gt;</span>
   <span class="nt">&lt;description&gt;</span>The heat of the host is above 30 Oc<span class="nt">&lt;/description&gt;</span>
   <span class="nt">&lt;severity&gt;</span>warning<span class="nt">&lt;/severity&gt;</span>
   <span class="nt">&lt;origin&gt;</span>HP Openview<span class="nt">&lt;/origin&gt;</span>
   <span class="nt">&lt;custom_id&gt;</span>1<span class="nt">&lt;/custom_id&gt;</span>
   <span class="nt">&lt;flood_rate&gt;</span>30<span class="nt">&lt;/flood_rate&gt;</span>
  <span class="nt">&lt;host</span> <span class="na">id=</span><span class="s">"50bf66ec-38df-47f1-a737-95d46e8d35fc"</span> <span class="nt">&gt;</span>
  <span class="nt">&lt;external_status&gt;</span>
       <span class="nt">&lt;state&gt;</span>warning<span class="nt">&lt;/state&gt;</span>
   <span class="nt">&lt;/external_status&gt;</span>
  <span class="nt">&lt;/host&gt;</span>
 <span class="nt">&lt;/event&gt;</span>
</code></pre></div></div>

<p>Another example for storage domains and when the external status and the event severity is different</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;event&gt;</span>
  <span class="nt">&lt;description&gt;</span>No space left on device<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;severity&gt;</span>error<span class="nt">&lt;/severity&gt;</span>
  <span class="nt">&lt;origin&gt;</span>XXX<span class="nt">&lt;/origin&gt;</span>
  <span class="nt">&lt;custom_id&gt;</span>11<span class="nt">&lt;/custom_id&gt;</span>
  <span class="nt">&lt;flood_rate&gt;</span>30<span class="nt">&lt;/flood_rate&gt;</span>
  <span class="nt">&lt;storage_domain</span> <span class="na">id=</span><span class="s">"949c21d6-1e65-4f1a-9442-4def1ccaf11a"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;external_status&gt;</span>
      <span class="nt">&lt;state&gt;</span>failure<span class="nt">&lt;/state&gt;</span>
  <span class="nt">&lt;/external_status&gt;</span>
  <span class="nt">&lt;/storage_domain&gt;</span>
<span class="nt">&lt;/event&gt;</span>
</code></pre></div></div>

<p>external_status field will be represented with a new seprate enum containing the values :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   OK
   INFO
   WARNING
   ERROR
   FAILURE
</code></pre></div></div>

<h2 id="search-engine">Search Engine</h2>

<p>The new external_status field will be available as a search field for the entity main view</p>

<h3 id="benefit-to-ovirt">Benefit to oVirt</h3>

<p>Enabeling to see problems that were reported by external systems in the entity main view at the point in time those problems occur</p>

<h3 id="dependencies--related-features">Dependencies / Related Features</h3>

<p>See also <a href="/ovirt-site/previews/3032/develop/release-management/features/ux/uiplugins43.html">UI-Plugins</a></p>

<h3 id="documentation--external-references">Documentation / External references</h3>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3032/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3032/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3032/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3032/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/infra/entityhealthstatus.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/infra/entityhealthstatus.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
