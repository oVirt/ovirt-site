<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Deploying oVirt and Gluster Single node Hyperconverged | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Deploying oVirt and Gluster Single node Hyperconverged" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2941/dropped/gluster-hyperconverged/chap-Single_node_hyperconverged.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2941/dropped/gluster-hyperconverged/chap-Single_node_hyperconverged.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Deploying oVirt and Gluster Single node Hyperconverged" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Deploying oVirt and Gluster Single node Hyperconverged","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2941/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/2941/dropped/gluster-hyperconverged/chap-Single_node_hyperconverged.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2941/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2941/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2941/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2941/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2941/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2941/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2941/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2941/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2941/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2941/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2941/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/2941/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/2941/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/2941/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/2941/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/2941/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2941/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2941/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2941/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2941/documentation/'>Documentation</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2941/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2941/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2941//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2941//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2941/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2941/dropped/">
              <span property="name">Dropped</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2941/dropped/gluster-hyperconverged/">
              <span property="name">Gluster Hyperconverged</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
        
        <section id="content" class="content container">
          
<h1 id="chapter-6-deploying-a-single-node-ovirt-and-gluster-hyperconverged">Chapter 6: Deploying a Single Node oVirt and Gluster Hyperconverged</h1>

<h2 id="pre-requisites">Pre-requisites</h2>

<ul>
  <li>
    <p>A single host with Enterprise Linux 8 or oVirt Node. Refer <a href="/ovirt-site/previews/2941/documentation/installing_ovirt_as_a_self-hosted_engine_using_the_command_line/#Red_Hat_Enterprise_Linux_hosts_SHE_cli_deploy">Enterprise Linux Hosts</a> or <a href="/ovirt-site/previews/2941/documentation/installing_ovirt_as_a_self-hosted_engine_using_the_command_line/#Red_Hat_Virtualization_Hosts_SHE_cli_deploy">oVirt Nodes</a></p>
  </li>
  <li>
    <p>You must have at least 2 interfaces on the host, so that the frontend and backend traffic can be separated out. Having only one network will cause the engine monitoring, client traffic, gluster I/O traffic to all run together and interfere each other. To segregate the backend network, the gluster cluster is formed using the backend network addresses, and the nodes are added to the engine using the frontend network address.</p>
  </li>
  <li>
    <p>You must have a fully qualified domain name prepared for your Engine and the host. Forward and reverse lookup records must both be set in the DNS. <strong>The Engine should use the same subnet as the management network.</strong></p>
  </li>
  <li>
    <p>You must have configured passwordless ssh between the host to itself as ansible roles need to remotely execute commands is a pre-requisite.
Follow below steps to configure this.</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ssh-keygen
# ssh-copy-id root@&lt;host-address&gt;
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="deploying-on-enterprise-linux-hosts">Deploying on Enterprise Linux Hosts</h2>

<h3 id="installing-the-required-packages">Installing the Required Packages</h3>

<p><strong>Installing the packages on the host</strong></p>

<ol>
  <li>
    <p>Subscribe to ovirt repos from http://resources.ovirt.org/pub/yum-repo/
For instance, to subscribe to oVirt 4.4 repo,</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> # yum install http://resources.ovirt.org/pub/yum-repo/ovirt-release44.rpm
</code></pre></div>    </div>
  </li>
  <li>
    <p>Install gluster-ansible-roles and cockpit-ovirt that will provide a UI for the installation of Hosted Engine. gluster-ansible project provides Ansible roles to deploy, configure, and maintain GlusterFS clusters.The roles are classified into following categories, which will have sub-roles (if necessary) for specific task, which will be explained in detail in their respective repositories.</p>
  </li>
</ol>

<p>gluster.infra - helps the user to get started in deploying GlusterFS filesystem
gluster.cluster - helps the user to set up a GlusterFS cluster, manage gluster volumes and peer operations.
gluster.features - implements GlusterFS usecases: nfs_ganesha, gluster_hc, ctdb, geo_replication.
gluster.repositories - helps user to register to RHSM and subscribe to repositories
gluster.maintenance - helps user to replace nodes and other maintenance activities. vdsm-gluster is used to manage gluster from oVirt, and pulls in all the required gluster dependencies. Install the oVirt Engine Virtual Appliance package for the Engine virtual machine installation.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    # yum install gluster-ansible-roles cockpit-ovirt-dashboard vdsm-gluster ovirt-engine-appliance
</code></pre></div></div>

<h2 id="deploying-on-ovirt-node-based-hosts">Deploying on oVirt Node based Hosts</h2>

<p><strong>oVirt Node contains all the required packages to set up the hyperconverged environment.</strong>
Refer to <a href="/ovirt-site/previews/2941/documentation/installing_ovirt_as_a_self-hosted_engine_using_the_command_line/#Red_Hat_Virtualization_Hosts_SHE_cli_deploy">oVirt Nodes</a> for instructions on installing oVirt Node on the host. You can proceed to setting up the hyperconverged environment if you have an oVirt Node based host.</p>

<h3 id="setting-up-the-hyperconverged-environment">Setting up the hyperconverged environment</h3>

<h4 id="installing-and-setting-up-gluster-volume">Installing and setting up gluster volume</h4>

<p>Gluster volumes need to be created first prior to the Hosted Engine installation flow. One of the volumes thatâ€™s created is used to host the Hosted Engine VM.
Use the Cockpit UI to setup single node deployment.</p>

<ol>
  <li>
    <p>Log into the Web Console
Browse to the the Web Console management interface of the first hyperconverged host, for example, https://node1.example.com:9090/, and log in with the root/similar super user credentials.</p>
  </li>
  <li>
    <p>Start the deployment wizard</p>
  </li>
</ol>

<p><img src="/ovirt-site/previews/2941/images/gluster-hyperconverged/single-node/cockpit-landing.png" alt="Hosts sub-tab" /></p>

<p><img src="/ovirt-site/previews/2941/images/gluster-hyperconverged/single-node/cockpit-deployment.png" alt="Hosts sub-tab" /></p>

<p><img src="/ovirt-site/previews/2941/images/gluster-hyperconverged/single-node/single-node-host.png" alt="Hosts sub-tab" /></p>

<p><img src="/ovirt-site/previews/2941/images/gluster-hyperconverged/single-node/single-node-pkg.png" alt="Hosts sub-tab" /></p>

<p><img src="/ovirt-site/previews/2941/images/gluster-hyperconverged/single-node/single-node-volume.png" alt="Hosts sub-tab" /></p>

<p><img src="/ovirt-site/previews/2941/images/gluster-hyperconverged/single-node/single-node-brick.png" alt="Hosts sub-tab" /></p>

<p><img src="/ovirt-site/previews/2941/images/gluster-hyperconverged/single-node/single-node-config.png" alt="Hosts sub-tab" /></p>

<h4 id="setting-up-hosted-engine">Setting up Hosted Engine</h4>

<p>Use the Ansible based installation flow of Hosted Engine to set up oVirt within a virtual machine. The storage details should be provided as type: <code class="language-plaintext highlighter-rouge">glusterfs</code> and connection path as: <code class="language-plaintext highlighter-rouge">&lt;hostname&gt;:/engine</code> (Replace hostname with address of host on which installation is carried out)</p>

<p><strong>Prev:</strong>  <a href="chap-Maintenance_and_Upgrading_Resources.html">Chapter: Maintenance and Upgrading Resources </a> <br /></p>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2941/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2941/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2941/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2941/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/dropped/gluster-hyperconverged/chap-Single_node_hyperconverged.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/dropped/gluster-hyperconverged/chap-Single_node_hyperconverged.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
