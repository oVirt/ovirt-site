<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Services Migration Plan | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Services Migration Plan" />
<meta name="author" content="David" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3177/develop/infra/services-migration-plan.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3177/develop/infra/services-migration-plan.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Services Migration Plan" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@David" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"David"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Services Migration Plan","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3177/images/logo.svg"},"name":"David"},"url":"https://ovirt.github.io/ovirt-site/previews/3177/develop/infra/services-migration-plan.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3177/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3177/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3177/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3177/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3177/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3177/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3177/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3177/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3177/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3177/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3177/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3177/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3177/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3177/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3177/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3177/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3177/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3177/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3177/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3177/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3177/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3177/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3177//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3177//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3177/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3177/develop/">
              <span property="name">Joining the developers community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3177/develop/infra/">
              <span property="name">Infra</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/bcb2aef8cc1559485f70f69eed60b9bb?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/bcb2aef8cc1559485f70f69eed60b9bb?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of David">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">David</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/6283090555baed00991434f7c2a060f8?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/6283090555baed00991434f7c2a060f8?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Eyal Edri">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Eyal Edri</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Much of this developer documentation provides historical context but may not reflect the current state of the project.<br>If you see outdated content please navigate to the page footer and click "<strong>Report an issue on GitHub</strong>".<br><br>It is <strong>not</strong> user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3177/documentation/'>User Documentation is available here.</a></div>

<h1 id="services-migration-plan">Services Migration Plan</h1>

<h2 id="infra-team-services-migration-plan">Infra team services migration plan</h2>

<p>The Infra team is planning to migrate all services to a new data center lab placed in pheonix, US.
This document will explain the phases for this migration and what and when each phase will include.
The migration is lead by David Caro <a href="mailto:dcaro@redhat.com">dcaro@redhat.com</a> and Eyal Edri <a href="mailto:eedri@redhat.com">eedri@redhat.com</a> from the oVIrt Infra team.</p>

<h3 id="phase-i-bringing-the-lab-online">Phase I: Bringing the lab online</h3>

<h5 id="estimated-finish-date-done">Estimated finish date: [DONE]</h5>

<ul>
  <li>[DONE] Installing 2 nfs storage servers and setting up data mirroring using <a href="http://www.drbd.org/">DRDB</a>,and network bonding between them.</li>
  <li>[DONE] Setting up the firewall rules to allow maintainance and external access (managed by DC team at Red Hat)</li>
  <li>[DONE] Installing all hypervisors running fedora 19 (to allow nested virtualization)</li>
  <li>[DONE] Set up networking for all hosts, including bonding and switch configuration (done by local network team at Red Hat)</li>
  <li>[DONE] Setting up DNS for all servers, using ovirt.org domain.</li>
  <li>[DONE] Installing ovirt hosted engine 3.4.Z and running on multiple hypervisors for fail-safe if one hypervisor is down</li>
  <li>[DONE] Add all hypervisors to the hosted engine</li>
  <li>[DONE] Add the nfs storage domain to hosted engine</li>
  <li>[DONE] Create 2 DataCenters: Jenkins &amp; Production (see diagram)</li>
  <li>[DONE] Setting up DHCP, DNS, PXE via foreman-proxy to allow easy vm spawn and installation of operating systems.</li>
  <li>[DONE] Test connectivity to other ovirt resources (rackspace, alterway)</li>
  <li>[DONE] Add all bare-metal servers to foreman/puppet and ensure all authorized infra memebers have ssh access.</li>
  <li>[DONE] Enure lab layout is documented and updated (including backup of network,fw configuration). Docs <a href="/ovirt-site/previews/3177/develop/infra/phoenix-lab-overview.html">Infra/Phoenix_Lab_Overview</a></li>
</ul>

<h4 id="lab-layout">Lab Layout</h4>

<p><img src="/ovirt-site/previews/3177/images/wiki/Phx2-ovirt-lab-layout.png" alt="" /></p>

<h4 id="phase-ii-setting-up-jenkins-dc">Phase II: Setting up Jenkins DC</h4>

<h5 id="estimated-finish-date-done-1">Estimated finish date: [DONE]</h5>

<ul>
  <li>[DONE] Setting up a jenkins DC with 5 hypervisors</li>
  <li>[DONE] Installing jenkins slaves with fedora/centos and starting testing jenkins jobs on them</li>
  <li>[DONE] Installing nested hosts running feodra/centos and testing automation on them (probably in a different cluster)</li>
</ul>

<h4 id="phase-iii-decommision-rackspace">Phase III: Decommision RACKSPACE</h4>

<h5 id="estimated-finish-date-done-2">Estimated finish date: [DONE]</h5>

<ul>
  <li>After verifying the new jenkins DC is capabale of running all our jenkins needs for the time being, remove all rackspace vms and stop the contract.</li>
</ul>

<h4 id="phase-iv-start-migration-of-production-servers-to-production-dc">Phase IV: Start migration of production servers to production DC</h4>

<h5 id="estimated-finish-date-tbd">Estimated finish date: TBD</h5>

<ul>
  <li>Migrate production vms from alterway (gradually)</li>
  <li>Migrate all services from resources.ovirt.org</li>
  <li>Migrate jenkins server from alterway02 baremetal into production VM.</li>
  <li>Add the alterway bare metal servers as hypervisors (dc/cluster is TBD)</li>
  <li>Optional: migrate gerrit server from amazon into production DC</li>
</ul>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3177/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3177/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3177/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3177/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2024 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/infra/services-migration-plan.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/infra/services-migration-plan.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
