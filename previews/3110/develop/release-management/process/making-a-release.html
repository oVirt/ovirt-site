<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Making an oVirt release | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Making an oVirt release" />
<meta name="author" content="Sandro Bonazzola" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3110/develop/release-management/process/making-a-release.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3110/develop/release-management/process/making-a-release.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Making an oVirt release" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@sandrobonazzola" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Sandro Bonazzola"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Making an oVirt release","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3110/images/logo.svg"},"name":"Sandro Bonazzola"},"url":"https://ovirt.github.io/ovirt-site/previews/3110/develop/release-management/process/making-a-release.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3110/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3110/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3110/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3110/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3110/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3110/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3110/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3110/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3110/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3110/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3110/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3110/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3110/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3110/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3110/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3110/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3110/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3110/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3110/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3110/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3110/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3110/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3110//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3110//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3110/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3110/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3110/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3110/develop/release-management/process/">
              <span property="name">Process</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/65fafd7adcef0c369b149759491fae7f?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/65fafd7adcef0c369b149759491fae7f?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Sandro Bonazzola">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard"><a rel="author" href="https://twitter.com/sandrobonazzola" title="Sandro Bonazzola">Sandro Bonazzola</a></span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          
<p>Updated on: 2022-01-20</p>

<h1 id="making-an-ovirt-release">Making an oVirt release</h1>

<p>The purpose of this document is to provide instructions on how to prepare a release for the oVirt project following the transition to external providers for
the git hosting and build execution.</p>

<h2 id="development-phase">Development phase</h2>

<p>During the development of the next oVirt release, patches are being verified using GitHub Actions.</p>

<p>We also have <a href="https://github.com/oVirt/ovirt-system-tests">oVirt System Tests</a> for gating but haven’t integrated them into GitHub Actions yet.</p>

<p>Once a PR is merged, the packages are being built by COPR infrastructure within the <a href="https://copr.fedorainfracloud.org/coprs/ovirt/ovirt-master-snapshot/">ovirt/ovirt-master-snapshot</a> project.</p>

<p>Manual and automated testing can then be done using the <a href="/ovirt-site/previews/3110/develop/dev-process/install-nightly-snapshot.html">snapshot composes provided by COPR</a>.</p>

<p>Instructions on how to get your package added to this flow are provided here:</p>
<ul>
  <li><a href="/ovirt-site/previews/3110/develop/developer-guide/migrating_to_github.html">Migrating a project from Gerrit to GitHub</a></li>
  <li><a href="/ovirt-site/previews/3110/develop/release-management/process/add_a_package_to_copr.html">Adding a project to ovirt-master-snapshot COPR repository</a></li>
</ul>

<h2 id="pre-release-phase">Pre release phase</h2>

<p>A pre release (alpha, beta, release candidate) should be built from tagged content.
In order to do that we are going to use the <a href="https://cbs.centos.org/koji/">CentOS Community Build Service (CBS)</a>.</p>

<p>Package maintainers must have a <a href="https://accounts.centos.org/">CentOS Account</a> or a <a href="https://accounts.fedoraproject.org/">Fedora Account</a>,
which were unified in the middle of 2021 to use the same account system.</p>

<p>In order to build for oVirt you need to be added to the CBS for which you need to join the <a href="https://wiki.centos.org/SpecialInterestGroup/Virtualization">CentOS Virtualization SIG</a>.
You can do that by attending a <a href="https://www.centos.org/community/calendar/#virtualization-sig">Virt SIG IRC meeting</a>
or asking on the <a href="https://lists.centos.org/mailman/listinfo/centos-virt">CentOS Virt mailing list</a>.</p>

<blockquote>
  <p>Please note that if you want to ship oVirt packages in other distributions, you’ll need to get permissions there.
For example, if you want to ship for Fedora, you need to be a package owner on the <a href="https://koji.fedoraproject.org/koji/">Fedora Build System</a>.</p>

  <p>At the time of writing, the oVirt project is focusing only on <a href="https://www.centos.org/centos-stream/">CentOS Stream</a>.</p>
</blockquote>

<p>The build process on the <a href="https://wiki.centos.org/HowTos/CommunityBuildSystem">Community Build Service is documented on the CentOS website</a>.</p>

<p>Once you have been approved with the corresponding permissions, you need to set up a build environment and to generate an authentication certificate. It’s described in detail in the page linked above, here is a short version:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install the necessary packages</span>
dnf <span class="nb">install </span>epel-release
dnf <span class="nb">install </span>centos-packager fedora-packager

<span class="c"># If you haven't set up Kerberos yet, you may need to set</span>
<span class="c"># the following line in /etc/krb5.conf if the default KEYRING</span>
<span class="c"># setting doesn't work with the commands below:</span>
<span class="c"># default_ccache_name = FILE:/tmp/krb5cc_%{uid}</span>

<span class="c"># Log in to Kerberos</span>
fkinit <span class="nt">-u</span> &lt;your CentOS/Fedora account username&gt;

<span class="c"># Generate the authentication certificate</span>
centos-cert <span class="nt">-u</span> &lt;your CentOS/Fedora account username&gt;
</code></pre></div></div>

<p>A typical build is done by taking a src.rpm from the COPR <a href="https://copr.fedorainfracloud.org/coprs/ovirt/ovirt-master-snapshot/builds/">ovirt/ovirt-master-snapshot Builds</a>
and rebuilding with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># This builds a scratch (just a test) build for CentOS Stream 9 for oVirt 4.5</span>
cbs build <span class="nt">--scratch</span> virt9s-ovirt-45-el9s &lt;your package .src.rpm&gt;

<span class="c"># This is for CentOS Stream 8:</span>
cbs build <span class="nt">--scratch</span> virt8s-ovirt-45-el8s &lt;your package .src.rpm&gt;

<span class="c"># If the build goes through fine, you can do a real build</span>
<span class="c"># CentOS Stream 9:</span>
cbs build virt9s-ovirt-45-el9s &lt;your package .src.rpm&gt;

<span class="c"># CentOS Stream 8:</span>
cbs build virt8s-ovirt-45-el8s &lt;your package .src.rpm&gt;
</code></pre></div></div>

<p>Once the builds complete it will be tagged as a candidate to be released as <code class="language-plaintext highlighter-rouge">virt8s-ovirt-45-candidate</code> (for CentOS Stream 8) or <code class="language-plaintext highlighter-rouge">virt9s-ovirt-45-candidate</code> (for CentOS Stream 9).</p>

<p>In order to publish the build you need to tag it for testing:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># CentOS Stream 8</span>
cbs tag virt8s-ovirt-45-testing &lt;your build without the trailing <span class="s1">'.src.rpm'</span><span class="o">&gt;</span>

<span class="c"># Example:</span>
cbs tag virt8s-ovirt-45-testing ovirt-hosted-engine-ha-2.4.10-1.el8
</code></pre></div></div>

<p>This will publish the build under the https://buildlogs.centos.org/centos/8-stream/virt/ repository.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># CentOS Stream 9</span>
cbs tag virt9s-ovirt-45-testing &lt;your build without the trailing <span class="s1">'.src.rpm'</span><span class="o">&gt;</span>

<span class="c">#example:</span>
cbs tag virt9s-ovirt-45-testing ovirt-hosted-engine-ha-2.4.10-1.el9
</code></pre></div></div>

<p>This will publish the build on https://buildlogs.centos.org/centos/9-stream/virt/.</p>

<h2 id="release-phase">Release phase</h2>

<p>Once the content in testing has been properly verified and considered good to be released for general availability, the release manager needs to tag the builds for release:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># CentOS Stream 8</span>
cbs tag virt8s-ovirt-45-release &lt;build without the trailing <span class="s1">'.src.rpm'</span><span class="o">&gt;</span>

<span class="c">#example:</span>
cbs tag virt8s-ovirt-45-release ovirt-hosted-engine-ha-2.4.10-1.el8
</code></pre></div></div>

<p>This will publish the build on the http://mirror.centos.org/centos/8-stream/virt/ repository and to CentOS mirrors.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># CentOS Stream 9</span>
cbs tag virt9s-ovirt-45-release &lt;build without the trailing <span class="s1">'.src.rpm'</span><span class="o">&gt;</span>

<span class="c"># Example:</span>
cbs tag virt9s-ovirt-45-release ovirt-hosted-engine-ha-2.4.10-1.el9
</code></pre></div></div>

<p>This will publish the build on http://mirror.stream.centos.org/SIGs/9-stream/virt/ and to CentOS mirrors.</p>

<h2 id="release-notes-preparation">Release notes preparation</h2>

<p>Release notes are auto-generated from git logs using scripts and config files stored in the <a href="https://github.com/oVirt/releng-tools">oVirt/releng-tools</a> repository.</p>

<p>Please follow the instructions on the <a href="https://github.com/oVirt/releng-tools/blob/master/releases/README-prepare-patches">oVirt Release Engineering Tools documentation</a>.
Remember that the release config file is going to be used only to deliver content which couldn’t build on CentOS Community Build Service (CBS).
The milestone config is the one used for generating the release notes.</p>

<p>Once ready, the notes can be automatically generated with <a href="https://github.com/oVirt/releng-tools/blob/master/release_notes_git.py"><code class="language-plaintext highlighter-rouge">release_notes_git.py</code></a> on the command line like:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># this assumes milestone/ovirt-4.5.0.conf being already populated</span>
<span class="c"># https://github.com/oVirt/releng-tools/blob/master/milestones/ovirt-4.5.0.conf</span>
 ./release_notes_git.py <span class="nt">--git-basedir</span> /var/tmp/release-cache <span class="nt">--contrib-project-list</span> ovirt-4.5.0 <span class="o">&gt;</span>notes.md
</code></pre></div></div>

<h2 id="move-ovirt-verified-bugs-to-closed">Move oVirt verified bugs to closed</h2>

<p>Have a look at oVirt bugs targeted to the milestone being shipped and in verified state.
You can use a query like:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://bugzilla.redhat.com/buglist.cgi?quicksearch=classification%3Aovirt%20target_milestone%3A<span class="nt">&lt;replace_with_target_milestone&gt;</span>%20status%3Averified
</code></pre></div></div>
<p>using something like <code class="language-plaintext highlighter-rouge">ovirt-4.5.0</code> as replacement for <code class="language-plaintext highlighter-rouge">&lt;replace_with_target_milestone&gt;</code>.</p>

<p>Move them to <code class="language-plaintext highlighter-rouge">CLOSED</code> state with resolution <code class="language-plaintext highlighter-rouge">CURRENT</code>.
While doing it, a comment like the following would help:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This bugzilla is included in oVirt 4.5.0 release, published on April 20th 2022.
Since the problem described in this bug report should be resolved in oVirt 4.5.0 release, it has been closed with a resolution of CURRENT RELEASE.
If the solution does not work for you, please open a new bug report.
</code></pre></div></div>

<h2 id="announcements">Announcements</h2>

<p>Once ready to announce, the release manager must ensure the announcement is sent:</p>

<p>To the <a href="https://blogs.ovirt.org/">oVirt Blog</a></p>

<p>To the relevant mailing list:</p>

<ul>
  <li><a href="https://lists.ovirt.org/archives/list/announce@ovirt.org/">Announce</a></li>
  <li><a href="https://lists.ovirt.org/archives/list/users@ovirt.org/">Users</a></li>
  <li><a href="https://lists.ovirt.org/archives/list/devel@ovirt.org/">Devel</a></li>
</ul>

<p>To social media:</p>

<ul>
  <li><a href="https://twitter.com/ovirt">Twitter</a></li>
  <li><a href="https://www.reddit.com/r/ovirt">Reddit</a></li>
  <li><a href="https://www.linkedin.com/company/ovirt">LinkedIn Official</a></li>
  <li><a href="https://www.linkedin.com/groups/4707460/">LinkedIn oVirt group</a></li>
  <li><a href="https://www.facebook.com/groups/ovirt.openvirtualization">Facebook Official</a></li>
</ul>

<p>To local communities:</p>

<ul>
  <li><a href="https://www.linkedin.com/groups/13669751/">LinkedIn oVirt Italia</a></li>
  <li><a href="https://www.facebook.com/groups/409421802961475/">Facebook oVirt India</a></li>
  <li><a href="https://www.facebook.com/groups/ovirt.italia/">Facebook oVirt Italia</a></li>
  <li><a href="https://www.facebook.com/groups/ovirt.korea/">Facebook oVirt Korea</a></li>
  <li><a href="https://www.facebook.com/groups/ovirtUGMY/">Facebook oVirt Malaysia</a></li>
  <li><a href="https://www.facebook.com/Ovirt-Myanmar-Community-974969229309990">Facebook oVirt Myanmar</a></li>
  <li><a href="https://www.facebook.com/groups/ovirtph/">Facebook oVirt Philippines</a></li>
</ul>

<p>Missed something? Please add!</p>

<p>A typical announcement for social media:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The #oVirt project community is pleased to announce the general availability of the new stable release
of the #opensource #virtualization solution for your entire enterprise: oVirt &lt;new version&gt;.
Read more about it on &lt;link to announcement blog post&gt;.
</code></pre></div></div>

<p>Typical blog post: <a href="https://blogs.ovirt.org/2022/01/ovirt-4-4-10-is-now-generally-available/">https://blogs.ovirt.org/2022/01/ovirt-4-4-10-is-now-generally-available/</a></p>

<p>Try contacting our <a href="/ovirt-site/previews/3110/develop/release-management/process/press-plan.html">Press Plan Contacts</a> to get press coverage.</p>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3110/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3110/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3110/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3110/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/process/making-a-release.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/process/making-a-release.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
