<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>DetailedFloatingDisk | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="DetailedFloatingDisk" />
<meta name="author" content="Daniel Erez" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3186/develop/release-management/features/storage/detailedfloatingdisk.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3186/develop/release-management/features/storage/detailedfloatingdisk.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="DetailedFloatingDisk" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Daniel Erez" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Daniel Erez"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"DetailedFloatingDisk","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3186/images/logo.svg"},"name":"Daniel Erez"},"url":"https://ovirt.github.io/ovirt-site/previews/3186/develop/release-management/features/storage/detailedfloatingdisk.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3186/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3186/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3186/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3186/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3186/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3186/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3186/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3186/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3186/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3186/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3186/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3186/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3186/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3186/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3186/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3186/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3186/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3186/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3186/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3186/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3186/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3186/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3186//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3186//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3186/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3186/develop/">
              <span property="name">Joining the developers community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3186/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3186/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3186/develop/release-management/features/storage/">
              <span property="name">Storage</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/93875e42e9b962947becb4e425504fab?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/93875e42e9b962947becb4e425504fab?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Daniel Erez">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Daniel Erez</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/db6bc448daa2b0b1315b0184bbcc9b77?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/db6bc448daa2b0b1315b0184bbcc9b77?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Maor Lipchuk">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Maor Lipchuk</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3186/documentation/'>Documentation is available here.</a></div>

<h1 id="detailed-floating-disk">Detailed Floating Disk</h1>

<h2 id="floating-disk">Floating Disk</h2>

<h3 id="summary">Summary</h3>

<p>Floating disk - a disk that is not attached to any VM.
This feature covers the management and usage of disks in floating state.</p>

<h3 id="owner">Owner</h3>

<ul>
  <li>
    <p>Feature owner: Daniel Erez (derez)</p>

    <ul>
      <li>
        <p>GUI Component owner: Daniel Erez (derez)</p>
      </li>
      <li>
        <p>REST Component owner: Michael Pasternak (mpasternak)</p>
      </li>
      <li>
        <p>Engine Component owner: Maor Lipchuk (mlipchuk)</p>
      </li>
      <li>
        <p>QA Owner: Yaniv Kaul (ykaul)</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Email: derez@redhat.com</p>
  </li>
</ul>

<h3 id="current-status">Current status</h3>

<ul>
  <li>Target Release:</li>
  <li>Status: Released</li>
  <li>Last updated date: Sun January 25 2011</li>
</ul>

<h3 id="detailed-description">Detailed Description</h3>

<p>The feature introduces a significant improvement to oVirt compatibility and flexabilty regarding disks usage. It provides administration and management functionalities for floating disks.
A floating disk should behave as a flexible independent entity that can be attached to any VM. Any virtual disk can be in a floating state - by unattaching the disk from the VM/s.
Supporting a floating state for disks is essential to derived features (e.g. ‘Shared RAW Disk’ and ‘Direct LUN Disk’) and dependent implementations (e.g. application clustering, shared data warehouse).</p>

<h4 id="entity-description">Entity Description</h4>

<h5 id="disk">Disk</h5>

<ul>
  <li>Floating state should be added to disk entity - floating / not floating.</li>
  <li>Name and Description should be added to disk entity.</li>
  <li>Disk must be a searchable entity for providing search/sort/display capabilities under ‘Virtual Disks’ main tab.</li>
  <li>Open issue: adding an indication whether the disk is originated from a VM or a template (useful for filtering ‘Virtual Disks’ sub-tabs).</li>
</ul>

<h4 id="functionality">Functionality</h4>

<ul>
  <li>A floating disk can be attached to any VM (or multiple VMs in case of a Shared Disk).</li>
  <li>Detaching a disk from a VM will result in a floating disk creation (i.e. the disk’s state will be updated to ‘floating’).</li>
  <li>A disk that is based on a thinly provisioned template can’t be detached (i.e. ‘floating’ is not applicable state for it).</li>
  <li>A floating disk can be moved between storage domains.</li>
  <li>Export/Import - currently not supported.</li>
</ul>

<h4 id="installationupgrade">Installation/Upgrade</h4>

<ul>
  <li>Installation
    <ul>
      <li>New/Edit disk:
        <ul>
          <li>Should enforce the user to enter a unique (in VM context) name.</li>
          <li>New optional field - Description.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Upgrade
    <ul>
      <li>Disk description should remain empty.</li>
    </ul>
  </li>
</ul>

<h4 id="user-experience">User Experience</h4>

<h5 id="administrator-portal">Administrator Portal</h5>

<ul>
  <li>CRUD - Introducing a new ‘Virtual Disks’ main tab
    <ul>
      <li>Contains a list of all the disks in the system (except templates disk) - sortable/searchable by Floating/Shared/Managed attributes.</li>
      <li>Actions - at first stage, only a few actions will be included (first subset will probably include ‘Remove Disk’)</li>
      <li>Includes the following sub-tabs:
        <ul>
          <li>General
            <ul>
              <li>Additional info on the selected Disk (type/interface/etc).</li>
            </ul>
          </li>
          <li>Virtual Machines (visible for disks that reside in VMs):
            <ul>
              <li>List of Virtual Machines to which the selected Disk is attached.</li>
              <li>Actions:
                <ul>
                  <li>Attach - dialog with a list of available VMs.</li>
                  <li>Detach - detaches the selected Disk from the selected VM.</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Each row is composed of the following columns:</li>
    </ul>

    <p>VM, Name, Storage Domain, Description, Size, Actual Size, Allocation,Creation Date, Floating(Yes/No), Shared(Yes/No), Managed(Yes/No).</p>
  </li>
  <li>VMs -&gt; Disks sub-tab
    <ul>
      <li>Attach/Detach all shared and/or floating disks.</li>
      <li>Edit/Remove disks (need to warn user in case disk is attached to more VMs).</li>
      <li>Move disks between storage domains.</li>
    </ul>
  </li>
  <li>Open Issue: Tree
    <ul>
      <li>‘Resources’ link under ‘Storage’ node - invokes a search of all the Floating/Shared disks in the Data Center.</li>
      <li>‘Free Disks’ link under a new ‘Resources’ node - invokes a search of all the Floating/Shared non-managed (i.e. direct-luns) disks.</li>
    </ul>
  </li>
</ul>

<h5 id="user-portal">User Portal</h5>

<p>The Power User Portal should allow the following operations:</p>

<ul>
  <li>
    <p>Attach/Detach only floating disks to a VM (through disks sub-tab).</p>

    <p>Note:
    For now, premissions for disk entities will <em>not</em> be supported.
    Consequently, availabilty of disks will be deterimined by their type (i.e. users can attach only floating disks).</p>
  </li>
</ul>

<h4 id="search">Search</h4>

<p>Search of disks should retrieve the following fields:</p>

<ul>
  <li>VM Name (For floating will return detached)</li>
  <li>Disk Name</li>
  <li>Description</li>
  <li>Size</li>
  <li>Actual Size</li>
  <li>Creation Date</li>
  <li>Bootable (True / False)</li>
  <li>Shared (True / False)</li>
  <li>quota name?</li>
  <li>quota id?</li>
</ul>

<p>Should consider adding the optional fields:</p>

<ul>
  <li>Direct LUN?</li>
  <li>Interface?</li>
  <li>Allocation?</li>
</ul>

<p>The return value should be sorted by VM Name and Disk Name.
Search auto completion will be supporting the following properties:</p>

<ul>
  <li>Disk name</li>
  <li>VM name</li>
  <li>bootable by searching for bootable = true</li>
  <li>shared by searching for shared = true</li>
  <li>floating disks by searching for floating = true</li>
</ul>

<h5 id="mockups">Mockups</h5>

<p>The following UI mockups contain guidelines for the different screens and wizards:</p>

<p><img src="/ovirt-site/previews/3186/images/wiki/VirtualDisks_MainTab_VMs.png" alt="" /></p>

<p><img src="/ovirt-site/previews/3186/images/wiki/VirtualDisks_MainTab_General.png" alt="" /></p>

<p><img src="/ovirt-site/previews/3186/images/wiki/Attach_disk_maintab_dialogue.png" alt="" /></p>

<p><img src="/ovirt-site/previews/3186/images/wiki/disks_subtab.png" alt="" /></p>

<p><img src="/ovirt-site/previews/3186/images/wiki/Disks_subtab_attach_disk_dialogue.png" alt="" /></p>

<h3 id="engine">Engine</h3>

<ul>
  <li>Add disk
    <ul>
      <li>When adding a disk, the vm id should be optional, if the id of the VM is provided and the VM is down then the disk should be attached(plugged) to the VM, but if the vm is up, the operation should be blocked.</li>
      <li>The disk should be locked when adding it, until the create process is ended in VDSM.</li>
    </ul>
  </li>
</ul>

<!-- -->

<ul>
  <li>Remove Disk
    <ul>
      <li>When removing a disk, the disk should be locked.</li>
    </ul>
  </li>
</ul>

<!-- -->

<ul>
  <li>Activate/Deactivate disk
    <ul>
      <li>Disk should not be locked when activate deactivate a disk same for attach detach</li>
    </ul>
  </li>
</ul>

<!-- -->

<ul>
  <li>move/copy
    <ul>
      <li>Currently floating disk should not be moved.</li>
      <li>Disk should be locked while move or copy.</li>
    </ul>
  </li>
</ul>

<h3 id="dependencies--related-features-and-projects">Dependencies / Related Features and Projects</h3>

<p>Affected oVirt projects:</p>

<ul>
  <li>API</li>
  <li>CLI</li>
  <li>Engine-core</li>
  <li>Webadmin</li>
  <li>User Portal</li>
</ul>

<p>Quota should be taken into consideration for every new feature that involves consumption of resources.
Shared raw disk will be dependent on floating disk.</p>

<h3 id="documentation--external-references">Documentation / External references</h3>

<p><a href="/ovirt-site/previews/3186/develop/release-management/features/storage/floatingdisk.html">Features/FloatingDisk</a></p>

<h3 id="future-work">Future Work</h3>

<ul>
  <li>Consider adding permissions support to disks entities.</li>
  <li>Adding templates disks to main tab.</li>
</ul>

<h3 id="open-issues">Open Issues</h3>

<ul>
  <li>Detaching a disk with a snapshot history: blocked to the user or collapsing and marking the snapshot as broken ?</li>
  <li>Disks main tab -&gt; VMs sub-tab - should it include Plugged/UnPlugged status column ?</li>
  <li>Permissions for actions on disks - who is permitted to invoke: Attach/Detach/Edit/Delete/Move ?</li>
  <li>More actions should be added to Disks main tab: New/Edit/Remove/Move/etc.</li>
</ul>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3186/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3186/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3186/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3186/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2024 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/storage/detailedfloatingdisk.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/storage/detailedfloatingdisk.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
