<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Overview of Networking in oVirt | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Overview of Networking in oVirt" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2978/develop/networking/networking-overview/" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2978/develop/networking/networking-overview/" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Overview of Networking in oVirt" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Overview of Networking in oVirt","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2978/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/2978/develop/networking/networking-overview/"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2978/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2978/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2978/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2978/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2978/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2978/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2978/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2978/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2978/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2978/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2978/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/2978/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/2978/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/2978/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/2978/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/2978/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2978/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2978/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2978/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2978/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2978/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2978/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2978//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2978//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2978/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2978/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2978/develop/networking/">
              <span property="name">Networking</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>This developer documentation is <strong>outdated</strong>, but provides historical context.<br><br>It is <strong>not</strong> user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/2978/documentation/'>Documentation is available here.</a></div>

<h1 id="overview-of-networking-in-ovirt">Overview of Networking in oVirt</h1>

<h2 id="introduction">Introduction</h2>

<p>This document provides an introductory general view on networking in oVirt, to
enable the reader to dive deeper into details.</p>

<h2 id="host-networking">Host Networking</h2>

<p>On the data link layer (layer 2), oVirt allows the configuration of Linux bonds,
to connect to VLANs and to define the MTU for network interfaces. These networks
can be shared via Linux bridges to VMs.</p>

<p>For SR-IOV, the number of virtual functions and their mapping to logical
networks can be configured.</p>

<p>There are also VLANs managed by FCoE and (application layer) iSCSI bonds, which
are exclusively for storage access and neither visible for VMs nor in RHVs
network configuration.</p>

<p>On the network layer (layer 3), IP addresses and gateways can be managed.</p>

<p>The DNS resolver used by the host can be configured.</p>

<p>It is also possible to manage network roles and QoS.</p>

<h2 id="vm-networking">VM Networking</h2>

<h3 id="supported-networking-types">Supported Networking Types</h3>

<p>In oVirt virtual NICs of VMs can connect to:</p>
<ul>
  <li>Linux bridges</li>
  <li>SR-IOV NICs</li>
  <li>OVN
    <ul>
      <li>oVirt internal OVN</li>
      <li>OpenStack Neutron OVN</li>
    </ul>
  </li>
</ul>

<p>The following diagram shows the structure of these three approaches:
<img src="./images/network_types.png" alt="Graphical comparison of VM network types" /></p>

<p>The following table compares the four kinds of networks:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>Linux bridge</th>
      <th>SR-IOV</th>
      <th>oVirt internal OVN</th>
      <th>OpenStack Neutron OVN</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Isolation from physical host networks</td>
      <td>Layer 3, Separate IP network possible</td>
      <td>Layer 2, Separate VLANs possible</td>
      <td>Isolated</td>
      <td>Isolated</td>
    </tr>
    <tr>
      <td>Live Migration</td>
      <td>x</td>
      <td>x</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>QoS</td>
      <td>x</td>
      <td> </td>
      <td> </td>
      <td>x</td>
    </tr>
    <tr>
      <td>Port Mirroring</td>
      <td>x</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Configuration of plugged vNIC</td>
      <td>x</td>
      <td>x</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>MAC address management</td>
      <td>x</td>
      <td>x</td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>MTU propagation</td>
      <td>x</td>
      <td> </td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>VLAN filtering, might require configuration on the physical switch</td>
      <td>x</td>
      <td>x</td>
      <td>Technology Preview</td>
      <td>Technology Preview</td>
    </tr>
    <tr>
      <td>MAC Spoofing Protection</td>
      <td>x</td>
      <td> </td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>IP Spoofing Protection</td>
      <td>x</td>
      <td> </td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>Predefined Network Filters</td>
      <td>x</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Custom Layer 3/4 Filtering</td>
      <td> </td>
      <td> </td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>NAT</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>x</td>
    </tr>
    <tr>
      <td>DHCP/Router Advertisements</td>
      <td> </td>
      <td> </td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>Layer 3 Router</td>
      <td> </td>
      <td> </td>
      <td>x</td>
      <td>x</td>
    </tr>
    <tr>
      <td>Performance</td>
      <td>**</td>
      <td>***</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>VM network data encapsulation</td>
      <td>flat, VLAN</td>
      <td>flat, VLAN</td>
      <td>Stable: GENEVE; Technology Preview: flat, VLAN</td>
      <td>Stable: GENEVE; Technology Preview: flat, VLAN</td>
    </tr>
  </tbody>
</table>

<h2 id="in-which-scenario-to-choose-which-kind-of-networking">In which scenario to choose which kind of networking</h2>

<p>Linux bridge is the default way to go. It is the most proven option which fits most use cases.</p>

<p>For scenarios that require very low network latency or a high count of Ethernet frames, it might be worth investing in SR-IOV, which requires hardware support and additional configuration steps.</p>

<p>oVirt’s internal OVN networks enable VMs to communicate with each other without additional effort.</p>

<p>If a full-featured SDN is required, OpenStack Neutron can be used to manage OVN.</p>

<p>To utilize the full potential of SDNs, like oVirt internal OVN, OpenStack Neutron OVN, or third party SDN, an additional client like CloudForms is required, because oVirt Engine provides only for a subset of the SDN features an user interface.</p>

<p>All kinds of networks can be combined on a single host and can be connected to the same VM, with a single exception: oVirt’s internal OVN can not be used with Neutron in the same cluster.</p>

<h3 id="interaction-with-the-guest">Interaction with the Guest</h3>

<p>oVirt supports the initial configuration of the guest by providing configuration data via cloud-init. If the qemu-guest-agent runs inside the guest, oVirt is able to report the IP addresses of the guest.</p>

<p>If the guest VM is using a VirtIO NIC, the MTU of the oVirt logical networks are provided to the guest OS. The guest can pick up the MTU from DHCPv4 or IPv6 router advertisements if supported by the logical network.</p>

<h3 id="relation-to-host-networking">Relation to Host Networking</h3>

<p>Linux bridge networking separates VM and host networking on OSI layer 3. This means that the
networking configuration below, like VLAN, bonding, and MTU, is shared between host and VMs.</p>

<p>This implies that hosts should not assign an IP address to VLANs which are connected to VMs
to reduce the surface of the host which might be confused by any VM traffic.</p>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2978/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2978/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2978/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2978/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/networking/networking-overview/&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/networking/networking-overview/index.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
