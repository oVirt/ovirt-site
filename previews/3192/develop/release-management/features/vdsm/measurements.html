<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Measurements | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Measurements" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3192/develop/release-management/features/vdsm/measurements.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3192/develop/release-management/features/vdsm/measurements.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Measurements" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Measurements","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3192/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/3192/develop/release-management/features/vdsm/measurements.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3192/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3192/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3192/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3192/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3192/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3192/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3192/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3192/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3192/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3192/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3192/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3192/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3192//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3192//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/develop/">
              <span property="name">Joining the developers community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/develop/release-management/features/vdsm/">
              <span property="name">Vdsm</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/469b83a72384b6c5feffe3f7ebc1e853?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/469b83a72384b6c5feffe3f7ebc1e853?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Vinzenz Feenstra">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Vinzenz Feenstra</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3192/documentation/'>Documentation is available here.</a></div>

<h1 id="measurements">Measurements</h1>

<h2 id="introdcution">Introdcution</h2>

<h3 id="motivation">Motivation</h3>

<p>The motivation for these tests, is to show how much more flexible the new API verb is but also to uncover potential `gotchas`. The section about the fake stats shows pretty good, that by not properly measuring the requested data. e.g. by blindly always requesting all changes, the usage of the API can cause more traffic on the wire than expected.</p>

<h3 id="what-was-measured">What was Measured</h3>

<p>The measurements performed here have been using the body sizes of the data transmitted over the wire in response to the used vdsm API. This section of the document describes how the simulation of the engine was performed and which API calls have been measured.</p>

<p><strong>All tests performed here are simulating a time frame of 15 minutes.</strong></p>

<h3 id="description">Description</h3>

<h4 id="listgetallvmstats">list/getAllVMStats</h4>

<p>Current represents how we are currently polling VDSM for the data of Virtual Machines. VDSM is polled every 3 seconds where there is called the ‘list’ API call and then every 5. time getAllVMStats is called. The list API call just sends the VM Ids and the status of the VM to the caller. ‘getAllVMStats’ contains various items, such as statistics, guest agent repoted data and various configuration and status fields.</p>

<p>The sequence currently looks like this:</p>

<ol>
  <li>getAllVMStats</li>
  <li>list</li>
  <li>list</li>
  <li>list</li>
  <li>list</li>
  <li>getAllVMStats</li>
  <li>list</li>
  <li>…</li>
</ol>

<h4 id="queryvms">queryVms</h4>

<p>This test is using the proposed queryVms API call.</p>

<p>The test has been performed by calling 300 times queryVms and remembering the ‘queryStamp’ return value and passing it as the ‘changedSince’ parameter value with the next call. The first call did not have the queryStamp value therefore the full data set has been returned. This was done to simulate properly and fairly simulate the first 15 minutes of the engine querying the hosts.</p>

<h4 id="queryvms-4-status1-all">queryVms 4 status/1 all</h4>

<p>This test is using the proposed queryVms API call.</p>

<p>This test has been implemented to simulate the current way of querying VDSM on top of the new proposed API.</p>

<ol>
  <li>queryVms(changedSince=lastChanged)</li>
  <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
  <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
  <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
  <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
  <li>queryVms(changedSince=lastChanged)</li>
  <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
  <li>…</li>
</ol>

<h4 id="queryvms-statistics-every-minute">queryVms statistics every minute</h4>

<p>This test is using the new proposed queryVms API call</p>

<p>This test assumes that certain statistics are only required every so often and for the sake of this test, the retrieval of the information has been scheduled to request this data statistics data every minute.</p>

<p>For this test the following fields have been categorized as statistics fields and are further refered to as `statsFields`</p>

<ul>
  <li>disksUsage</li>
  <li>network</li>
  <li>disks</li>
  <li>memoryStats</li>
  <li>memUsage</li>
</ul>

<p>Illustrative querying sequence:</p>

<ul>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)
 queryVms(fields=statsFields, changedSince=statsLastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>…</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)
 queryVms(fields=statsFields, changedSince=statsLastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>…</li>
    </ol>
  </li>
</ul>

<h4 id="queryvms-statistics--status">queryVms statistics &amp; status</h4>

<p>This test is using the new proposed queryVms API call</p>

<p>This test has been implemented as a combination out of tests performed by `queryVms statistics every minute` and `queryVms 4 status/1 all`.</p>

<p>Illustrative querying sequence:</p>

<ul>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)
 queryVms(fields=statsFields, changedSince=statsLastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>…</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(exclude=statsFields, changedSince=lastChanged)
 queryVms(fields=statsFields, changedSince=statsLastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>queryVms(fields=’status’, changedSince=lastChanged)</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>…</li>
    </ol>
  </li>
</ul>

<p><strong>Note:</strong> <em>The test here might have been optimized to NOT use separate calls when querying for the statistics since it overlaps with the general query, however for the sake of simplicity and potential difference on the engine side for the implementation this has been left this way.</em></p>

<h2 id="results">Results</h2>

<h3 id="idle-vms">Idle VMs</h3>

<p>A set of mixed (Windows/Linux) vms having no active users or any kind of services running. A third (33%) having of those VMs have guest agents.</p>

<h4 id="6-vms">6 VMs</h4>

<p><img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-6vms-idle.png" alt="" /></p>

<table>
  <thead>
    <tr>
      <th>-</th>
      <th>Total Body Size</th>
      <th>Total Body Size in MiB</th>
      <th>Total Savings %</th>
      <th>avg. Body Size</th>
      <th>avg Body Savings %</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>queryVms statistics &amp; status</td>
      <td>657336</td>
      <td>0.63</td>
      <td>80.30</td>
      <td>2086.78</td>
      <td>81.24</td>
    </tr>
    <tr>
      <td>queryVms statistics every minute</td>
      <td>778709</td>
      <td>0.74</td>
      <td>76.66</td>
      <td>2472.09</td>
      <td>77.77</td>
    </tr>
    <tr>
      <td>queryVms 4 status/1 all</td>
      <td>640127</td>
      <td>0.61</td>
      <td>80.82</td>
      <td>2133.76</td>
      <td>80.82</td>
    </tr>
    <tr>
      <td>queryVms</td>
      <td>761709</td>
      <td>0.73</td>
      <td>77.17</td>
      <td>2539.03</td>
      <td>77.17</td>
    </tr>
    <tr>
      <td>list/getAllVMStats</td>
      <td>3336905</td>
      <td>3.18</td>
      <td>0</td>
      <td>11123.02</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

<h4 id="100-vms">100 VMs</h4>

<p><img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-100vms-idle.png" alt="" /></p>

<table>
  <thead>
    <tr>
      <th>-</th>
      <th>Total Body Size</th>
      <th>Total Body Size in MiB</th>
      <th>Total Savings %</th>
      <th>avg. Body Size</th>
      <th>avg Body Savings %</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>queryVms statistics &amp; status</td>
      <td>9143265</td>
      <td>8.72</td>
      <td>82.41</td>
      <td>29026.24</td>
      <td>83.25</td>
    </tr>
    <tr>
      <td>queryVms statistics every minute</td>
      <td>13162705</td>
      <td>12.55</td>
      <td>74.67</td>
      <td>41786.37</td>
      <td>75.88</td>
    </tr>
    <tr>
      <td>queryVms 4 status/1 all</td>
      <td>8922576</td>
      <td>8.51</td>
      <td>82.83</td>
      <td>29741.92</td>
      <td>82.83</td>
    </tr>
    <tr>
      <td>queryVms</td>
      <td>13052561</td>
      <td>12.45</td>
      <td>74.89</td>
      <td>43508.54</td>
      <td>74.89</td>
    </tr>
    <tr>
      <td>list/getAllVMStats</td>
      <td>51975066</td>
      <td>49.57</td>
      <td>0.00</td>
      <td>173250.22</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>

<h4 id="1000-vms">1000 VMs</h4>

<p><img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-1000vms-idle.png" alt="" /></p>

<table>
  <thead>
    <tr>
      <th>-</th>
      <th>Total Body Size</th>
      <th>Total Body Size in MiB</th>
      <th>Total Savings %</th>
      <th>avg. Body Size</th>
      <th>avg Body Savings %</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>queryVms statistics &amp; status</td>
      <td>97051742</td>
      <td>92.56</td>
      <td>81.20</td>
      <td>308100.77</td>
      <td>82.09</td>
    </tr>
    <tr>
      <td>queryVms statistics every minute</td>
      <td>171220290</td>
      <td>163.29</td>
      <td>66.83</td>
      <td>543556.48</td>
      <td>68.41</td>
    </tr>
    <tr>
      <td>queryVms 4 status/1 all</td>
      <td>122473350</td>
      <td>116.80</td>
      <td>76.27</td>
      <td>408244.50</td>
      <td>76.27</td>
    </tr>
    <tr>
      <td>queryVms</td>
      <td>204050147</td>
      <td>194.60</td>
      <td>60.47</td>
      <td>680167.16</td>
      <td>60.47</td>
    </tr>
    <tr>
      <td>list/getAllVMStats</td>
      <td>516132691</td>
      <td>492.22</td>
      <td>0.00</td>
      <td>1720442.30</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>

<h3 id="fake-stats">Fake Stats</h3>

<p>A set of VMs where the statistics for ‘disksUsage’, ‘memUsage’, ‘cpuSys’, ‘cpuUser’, ‘network’ have been actively manipulated to be different on every request. (Basically what the fake vm stats hook does just made suitable for this test)</p>

<p>This test simulates heavy workload VMs.</p>

<h4 id="6-vms-1">6 VMs</h4>

<p><img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-6vms-fakestats.png" alt="" /></p>

<table>
  <thead>
    <tr>
      <th>-</th>
      <th>Total Body Size</th>
      <th>Total Body Size in MiB</th>
      <th>Total Savings %</th>
      <th>avg. Body Size</th>
      <th>avg Body Savings %</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>new status &amp; stats</td>
      <td>824446</td>
      <td>0.7862529755</td>
      <td>76.79</td>
      <td>2617.29</td>
      <td>77.90</td>
    </tr>
    <tr>
      <td>queryVms statistics every minute</td>
      <td>1187632</td>
      <td>1.1326141357</td>
      <td>66.57</td>
      <td>3770.26</td>
      <td>68.16</td>
    </tr>
    <tr>
      <td>queryVms 4 status/1 all</td>
      <td>1331638</td>
      <td>1.2699489594</td>
      <td>62.52</td>
      <td>4438.79</td>
      <td>62.52</td>
    </tr>
    <tr>
      <td>queryVms</td>
      <td>4362378</td>
      <td>4.1602878571</td>
      <td>-22.79</td>
      <td>14541.26</td>
      <td>-22.79</td>
    </tr>
    <tr>
      <td>list/getAllVMStats</td>
      <td>3552611</td>
      <td>3.3880338669</td>
      <td>0.00</td>
      <td>11842.04</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>

<h4 id="100-vms-1">100 VMs</h4>

<p><img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-100vms-fakestats.png" alt="" /></p>

<table>
  <thead>
    <tr>
      <th>-</th>
      <th>Total Body Size</th>
      <th>Total Body Size in MiB</th>
      <th>Total Savings %</th>
      <th>avg. Body Size</th>
      <th>avg Body Savings %</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>new status &amp; stats</td>
      <td>11949463</td>
      <td>11.3958959579</td>
      <td>79.23</td>
      <td>37934.80</td>
      <td>80.22</td>
    </tr>
    <tr>
      <td>queryVms statistics every minute</td>
      <td>17834759</td>
      <td>17.0085515976</td>
      <td>69.01</td>
      <td>56618.28</td>
      <td>70.48</td>
    </tr>
    <tr>
      <td>queryVms 4 status/1 all</td>
      <td>20186805</td>
      <td>19.2516374588</td>
      <td>64.92</td>
      <td>67289.35</td>
      <td>64.92</td>
    </tr>
    <tr>
      <td>queryVms</td>
      <td>71417759</td>
      <td>68.1092824936</td>
      <td>-24.12</td>
      <td>238059.20</td>
      <td>-24.12</td>
    </tr>
    <tr>
      <td>list/getAllVMStats</td>
      <td>57541078</td>
      <td>54.8754482269</td>
      <td>0.00</td>
      <td>191803.59</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>

<h4 id="1000-vms-1">1000 VMs</h4>

<p><img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-1000vms-fakestats.png" alt="" /></p>

<table>
  <thead>
    <tr>
      <th>-</th>
      <th>Total Body Size</th>
      <th>Total Body Size in MiB</th>
      <th>Total Savings %</th>
      <th>avg. Body Size</th>
      <th>avg Body Savings %</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>new status &amp; stats</td>
      <td>118286166</td>
      <td>112.8064785004</td>
      <td>79.29</td>
      <td>375511.64</td>
      <td>80.28</td>
    </tr>
    <tr>
      <td>queryVms statistics every minute</td>
      <td>193966163</td>
      <td>184.980547905</td>
      <td>66.04</td>
      <td>615765.60</td>
      <td>67.66</td>
    </tr>
    <tr>
      <td>queryVms 4 status/1 all</td>
      <td>200467582</td>
      <td>191.1807842255</td>
      <td>64.91</td>
      <td>668225.27</td>
      <td>64.91</td>
    </tr>
    <tr>
      <td>queryVms</td>
      <td>725224600</td>
      <td>691.628074646</td>
      <td>-26.96</td>
      <td>2417415.33</td>
      <td>-26.96</td>
    </tr>
    <tr>
      <td>list/getAllVMStats</td>
      <td>571238141</td>
      <td>544.7751436234</td>
      <td>0.00</td>
      <td>1904127.14</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>

<h3 id="windows-vms">Windows VMs</h3>

<p>Since the Windows virtual machines are producing more data reported by the guest agent due to the definition of the application list, as another sub test this simulates a fleet of Windows clones. Those Virtual Machines can be considered as a VM pool with 6 or 100 VMs. The VMs in this test have not been actively used, however actively reported their status and their the application list.</p>

<p>Please note that this is a test which is in comparison with the idle test, where ‘list/getAllVmStats’ would produce twice as much (even possibly even more data depending on what is installed on the windows machine) opposed to the current implementation of the application lists on Linux machines.</p>

<p>Just to give an idea about how significant this difference can be here a comparison of the query results: <img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-100vms-mixed-vs-windows.png" alt="" /></p>

<h4 id="6-vms-2">6 VMs</h4>

<p><img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-6vms-windows.png" alt="" /></p>

<table>
  <thead>
    <tr>
      <th>-</th>
      <th>Total Body Size</th>
      <th>Total Body Size in MiB</th>
      <th>Total Savings %</th>
      <th>avg. Body Size</th>
      <th>avg Body Savings %</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>queryVms statistics &amp; status</td>
      <td>697203</td>
      <td>0.66</td>
      <td>88.87</td>
      <td>2213.34</td>
      <td>89.40</td>
    </tr>
    <tr>
      <td>queryVms statistics every minute</td>
      <td>813910</td>
      <td>0.78</td>
      <td>87.01</td>
      <td>2583.84</td>
      <td>87.63</td>
    </tr>
    <tr>
      <td>queryVms 4 status/1 all</td>
      <td>678418</td>
      <td>0.65</td>
      <td>89.17</td>
      <td>2261.39</td>
      <td>89.17</td>
    </tr>
    <tr>
      <td>queryVms</td>
      <td>791384</td>
      <td>0.75</td>
      <td>87.37</td>
      <td>2637.95</td>
      <td>87.37</td>
    </tr>
    <tr>
      <td>list/getAllVMStats</td>
      <td>6266652</td>
      <td>5.98</td>
      <td>0.00</td>
      <td>20888.84</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>

<h4 id="100-vms-2">100 VMs</h4>

<p><img src="/ovirt-site/previews/3192/images/wiki/Vdsm-query-interface-measurements-100vms-windows.png" alt="" /></p>

<table>
  <thead>
    <tr>
      <th>-</th>
      <th>Total Body Size</th>
      <th>Total Body Size in MiB</th>
      <th>Total Savings %</th>
      <th>avg. Body Size</th>
      <th>avg Body Savings %</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>queryVms statistics &amp; status</td>
      <td>9924124</td>
      <td>9.46</td>
      <td>90.74</td>
      <td>31505.16</td>
      <td>91.18</td>
    </tr>
    <tr>
      <td>queryVms statistics every minute</td>
      <td>13888555</td>
      <td>13.25</td>
      <td>87.04</td>
      <td>44090.65</td>
      <td>87.66</td>
    </tr>
    <tr>
      <td>queryVms 4 status/1 all</td>
      <td>9710008</td>
      <td>9.26</td>
      <td>90.94</td>
      <td>32366.69</td>
      <td>90.94</td>
    </tr>
    <tr>
      <td>queryVms</td>
      <td>13733787</td>
      <td>13.10</td>
      <td>87.18</td>
      <td>45779.29</td>
      <td>87.18</td>
    </tr>
    <tr>
      <td>list/getAllVMStats</td>
      <td>107161980</td>
      <td>102.20</td>
      <td>0.00</td>
      <td>357206.60</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3192/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3192/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3192/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3192/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2024 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/vdsm/measurements.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/vdsm/measurements.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
