<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>oVirt 3.0 to 3.1 upgrade | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="oVirt 3.0 to 3.1 upgrade" />
<meta name="author" content="Fabian Deutsch" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3011/develop/release-management/releases/3.0/to-3.1-upgrade.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3011/develop/release-management/releases/3.0/to-3.1-upgrade.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="oVirt 3.0 to 3.1 upgrade" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Fabian Deutsch" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Fabian Deutsch"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"oVirt 3.0 to 3.1 upgrade","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3011/images/logo.svg"},"name":"Fabian Deutsch"},"url":"https://ovirt.github.io/ovirt-site/previews/3011/develop/release-management/releases/3.0/to-3.1-upgrade.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3011/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3011/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3011/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3011/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3011/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3011/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3011/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3011/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3011/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3011/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3011/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3011/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3011/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3011/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3011/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3011/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3011/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3011/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3011/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3011/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3011/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3011/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3011//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3011//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3011/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3011/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3011/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3011/develop/release-management/releases/">
              <span property="name">Releases</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3011/develop/release-management/releases/3.0/">
              <span property="name">oVirt 3.0 release notes</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/b876c8ac25402ce621590c1add408b20?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/b876c8ac25402ce621590c1add408b20?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Fabian Deutsch">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Fabian Deutsch</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/9e2a26c1b7751bdb65047a7ea281b23b?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/9e2a26c1b7751bdb65047a7ea281b23b?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Ofer Schreiber">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Ofer Schreiber</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          
<h1 id="ovirt-30-to-31-upgrade">oVirt 3.0 to 3.1 upgrade</h1>

<h2 id="general-information">General Information</h2>

<p>oVirt 3.0 was released as Fedora 16 package, and 3.1 is targeted to Fedora 17. Due to the nature of this upgrade, we DO NOT recommend it, users are advised to do a 3.1 clean installation, and to import all VM’s and template into the new installation.</p>

<h2 id="upgrade-instructions">Upgrade Instructions</h2>

<ul>
  <li>Remove all ovirt packages</li>
</ul>

<!-- -->

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> yum remove ovirt\*
</code></pre></div></div>

<p><strong>DO NOT run the engine-cleanup utility</strong></p>

<ul>
  <li>Upgrade the system the oVirt Engine was installed on to Fedora 17:
    <ul>
      <li><a href="http://fedoraproject.org/wiki/PreUpgrade">http://fedoraproject.org/wiki/PreUpgrade</a></li>
    </ul>
  </li>
</ul>

<!-- -->

<ul>
  <li>Install oVirt Engine rpms</li>
</ul>

<!-- -->

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> yum install ovirt-engine
</code></pre></div></div>

<ul>
  <li>Restore previous keystore and preserve .sh scripts</li>
</ul>

<!-- -->

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /etc/pki
mv ovirt-engine ovirt-engine.old
mv ovirt-engine-backups/ovirt-engine-DATE_OF_BACKUP/ovirt-engine .
find ovirt-engine -user jboss-as -exec chown ovirt:ovirt {} \;
cp -f ovirt-engine.old/*.sh ovirt-engine/
service nfs-server disable; service nfs-server enable
service rpb-bind disable; service rpc-bind enable
</code></pre></div></div>

<ul>
  <li>Execute oVirt Engine Setup utility</li>
</ul>

<!-- -->

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> engine-setup
</code></pre></div></div>

<h2 id="updating-ovirt-node">Updating oVirt Node</h2>

<ul>
  <li>Download the latest stable <a href="https://resources.ovirt.org/releases/3.1/tools/">oVirt Node release</a></li>
  <li>Use one of the supported (PXE, USB, …) medias to boot the to be updated machine running Node</li>
  <li>The update is non destructive, that means all your configurations will be kept</li>
</ul>

<!-- -->

<ul>
  <li>Select “Start Ovirt Node” in the boot menu</li>
  <li>In the TUI you should be prompted to “<code class="language-plaintext highlighter-rouge">Upgrade &lt;current version&gt; to &lt;new version&gt;</code>”
    <ul>
      <li>Press ENTER to continue</li>
    </ul>
  </li>
  <li>Select the keyboard layout</li>
  <li>Enter - at least - the current admin password. This is a security check to ensure that not someone else overrides your installation.
    <ul>
      <li>You can also enter a new admin password in the additional fields</li>
    </ul>
  </li>
  <li>(oVirt Node is beeing updated)</li>
  <li>Press ENTER to reboot</li>
  <li>The updated oVirt Node is started by default
    <ul>
      <li>A backup entry was added to the bootmenu, select this backup if the new version can not be booted or leads to problems</li>
    </ul>
  </li>
</ul>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3011/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3011/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3011/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3011/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/releases/3.0/to-3.1-upgrade.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/releases/3.0/to-3.1-upgrade.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
