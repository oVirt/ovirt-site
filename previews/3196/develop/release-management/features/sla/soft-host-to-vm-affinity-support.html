<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>soft-host-to-vm-affinity-support | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="soft-host-to-vm-affinity-support" />
<meta name="author" content="Yanir Quinn" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3196/develop/release-management/features/sla/soft-host-to-vm-affinity-support.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3196/develop/release-management/features/sla/soft-host-to-vm-affinity-support.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="soft-host-to-vm-affinity-support" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Yanir Quinn" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Yanir Quinn"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"soft-host-to-vm-affinity-support","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3196/images/logo.svg"},"name":"Yanir Quinn"},"url":"https://ovirt.github.io/ovirt-site/previews/3196/develop/release-management/features/sla/soft-host-to-vm-affinity-support.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3196/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3196/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3196/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3196/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3196/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3196/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3196/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3196/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3196/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3196/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3196/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3196/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3196/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3196/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3196/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3196/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3196/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3196/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3196/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3196/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3196/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3196/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3196//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3196//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3196/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3196/develop/">
              <span property="name">Joining the developers community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3196/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3196/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3196/develop/release-management/features/sla/">
              <span property="name">Sla</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Yanir Quinn">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Yanir Quinn</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/d3e5014dcc318e6606b18a8f5fd90dae?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/d3e5014dcc318e6606b18a8f5fd90dae?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Martin Sivak">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Martin Sivak</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3196/documentation/'>Documentation is available here.</a></div>

<h1 id="soft-host-to-vm-affinity-support-and-rack-use-case">Soft host to VM affinity support and Rack use case</h1>

<h2 id="summary">Summary</h2>
<p>Certain set of VMs form a logical management unit and should run on a certain set of hosts for SLA or management (e.g. a separate rack for each customer).
The VMs can run anywhere in case the dedicated rack needs to be turned off, but should return to their dedicated hosts once the rack is back up.</p>

<p>This would be best implemented by enhancing the current VM to VM soft affinity rules to support hosts as well.
The other piece that is needed is to add affinity based balancing operation to allow the VMs to return to the proper host when it becomes available.</p>

<h3 id="owners">Owners</h3>

<ul>
  <li>Name: Yanir Quinn (yquinn)</li>
  <li>Email: <a href="mailto:yquinn@redhat.com">yquinn@redhat.com</a></li>
</ul>

<h2 id="detailed-description">Detailed Description</h2>

<p>Add additional affinity lists and relationships to the existing affinity object so it would contain:</p>

<ul>
  <li>Vms_affinity_enabled flag (true/false)</li>
  <li>VM list</li>
  <li>VM to VM affinity rule (positive weak, pos. strong, negative weak, neg. strong,disabled)</li>
  <li>Host list</li>
  <li>VM to Host affinity rule (positive weak, pos. strong, negative weak, neg. strong)</li>
  <li>Any other additional resource</li>
  <li>Rule for the additional resource (positive weak, pos. strong, negative weak, neg. strong)</li>
</ul>

<h3 id="benefit-to-ovirt">Benefit to oVirt</h3>
<p>Enhance affinity groups to support vm to host affinity.</p>

<h3 id="database">Database</h3>

<p>The plan is to add more resources like hosts to affinity groups.</p>

<p>The table structure of <em>affinity_group_members</em> will be altered</p>

<table>
  <tbody>
    <tr>
      <td><em>From</em> :  affinity_group_id (foreign key to affinity_groups + delete cascade)</td>
      <td>vm_id (foreign key to vm_static + delete cascade)</td>
    </tr>
  </tbody>
</table>

<p><em>To</em> :      affinity_group_id (foreign key to affinity_groups + delete cascade) | vm_id (foreign key to vm_static + delete cascade) - <strong>change modifier to enable null</strong>   | <strong>vds_id (foreign key to vds_static + delete cascade)</strong>
(any additional future resource can be added here with an index and a foreign key)</p>

<ul>
  <li>Added a constraint to check that at least one column out of vm_id and vds_id is not null for each entry.</li>
</ul>

<p>The table structure of affinity_groups will altered by adding a new none column:</p>

<p><em>affinity_groups</em>: id, name, cluster_id (foreign key to vds_groups + delete cascade), <strong>positive -&gt; vm_positive
,enforcing -&gt; vm_enforcing ,vds_positive,vds_enforcing ,vms_affinity_enabled (true/false  - default false)</strong></p>

<blockquote>
  <p><strong>NOTE</strong> : The additional “vms_affinity_enabled”  flag is needed for affinity group to be able to express that VMs in an affinity group have no relationship to each other.</p>
</blockquote>

<blockquote>
  <p><strong>NOTE</strong> : for each affinity group there must be at least one entry with a vm_id in affinity_group_members table (even only for a vm to host affinity).</p>
</blockquote>

<h3 id="scheduler">Scheduler</h3>
<ul>
  <li>Migration policy unit was altered to accept target hosts with the same id as the source host of the candidate VM for  migration (this was done for balancing purposes)</li>
  <li>Vm affinity filter and weight policy units were modified to exclude affinity groups with vms_affinity_enabled = false;</li>
  <li>Added new filter policy unit <strong>VmToHostAffinityFilterPolicyUnit</strong> which:
Enables Affinity Groups hard enforcement for VMs to hosts; VMs in group are required to run either on one of the hosts in group (positive) or on independent hosts which are excluded from the hosts in group (negative).</li>
  <li>
    <p>Added new weight policy unit <strong>VmToHostAffinityWeightPolicyUnit</strong> which:
Enables Affinity Groups soft enforcement for VMs to hosts; VMs in group are most likely to run either on one of the hosts in group (positive) or on independent hosts which are excluded from the hosts in group (negative)</p>

    <p>The score of a host is calculated by the number of affinity group violations, when 1 is the default score
and for each violation add + 1.</p>
  </li>
</ul>

<blockquote>
  <p><strong>NOTE</strong> : When load balancing is enabled and there are soft host affinity constraints then there might be a need to increase the factor of the VmToHostsAffinityGroups weight policy unit to ensure that affinity is stronger than other policies.The default factor is 10.</p>
</blockquote>

<h3 id="affinity-rules-enforcement-manager">Affinity Rules Enforcement Manager</h3>
<p>The existing procedure for vm affinity procedure as shown in <a href="/ovirt-site/previews/3196/develop/release-management/features/sla/affinity-rules-enforcement-manager.html">Affinity Rules Enforcement Manager</a> 
will be enhanced:</p>

<ul>
  <li><strong>chooseNextVmToMigrate</strong> will follow this order of selection:
    <ol>
      <li>select a VM to migrate if a VM to host affinity is violated</li>
      <li>select a VM to migrate if a VM to VM affinity is violated</li>
    </ol>
  </li>
  <li>VM to VM affinity groups will be selected as candidates only if VM affinity enabled flag is true.</li>
  <li>Selection of a VM from VM to host affinity procedure:
    <ol>
      <li>
        <p>Get all affinity groups with hosts list &gt; 0</p>
      </li>
      <li>Create a list of candidate VMs violating positive/negative enforcing affinity to hosts.</li>
      <li>Sort the candidate VMs according to the number of violations (descending).</li>
      <li>Loop over the sorted hard affinity VMs list:
        <ol>
          <li>If the VM can migrate with its associated hosts:</li>
          <li>Return the VM for migration</li>
        </ol>
      </li>
      <li>Create a list of candidate VMs violating positive/negative non enforcing affinity to hosts.</li>
      <li>Loop over the sorted soft affinity VMs list:
        <ol>
          <li>If the VM can migrate with its associated hosts:</li>
          <li>Return the VM for migration</li>
        </ol>
      </li>
      <li>If no vm was found for migration - check candidates from VM to VM affinity.
        <ul>
          <li>The candidates for VM to VM affinity will be select from affinity groups where
VM affinity is not disabled. (VM affinity enabled = true)</li>
        </ul>
      </li>
    </ol>
  </li>
  <li>When choosing a VM from VM to VM affinity - check if the VM exists as a candidate in the VM to host lists 
and issue a warning (subjected for change)</li>
</ul>

<h3 id="ui">UI</h3>
<p>First stage - in order not to break the current vm to vm affinity functionality, an additional 
check box will be added to the Affinity group panel : <strong>Vm Affinity Enabled</strong></p>

<p>When checked - the original behavior of vm to vm affinity will be preserved.</p>

<p>When unchecked - vm to vm affinity rules will not apply.</p>

<p>Host to vm affinity settings will be provided currently only via the rest api.</p>

<h3 id="rest-api">REST API</h3>
<p>The current solution will be enhanced to support the additional hosts list and the new attributes
for vms and hosts lists.</p>

<p>A new type will be added - <strong>AffinityRule</strong> with two attributes of that type,
one for virtual machines and another for hosts:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;vms_rule&gt;</span>
  <span class="nt">&lt;positive&gt;</span>true|false<span class="nt">&lt;/positive&gt;</span>
  <span class="nt">&lt;enforcing&gt;</span>true|false<span class="nt">&lt;/enforcing&gt;</span>
  <span class="nt">&lt;enabled&gt;</span>true|false<span class="nt">&lt;/enabled&gt;</span>
<span class="nt">&lt;/vms_rule&gt;</span>
<span class="nt">&lt;hosts_rule&gt;</span>
  <span class="nt">&lt;positive&gt;</span>true|false<span class="nt">&lt;/positive&gt;</span>
  <span class="nt">&lt;enforcing&gt;</span>true|false<span class="nt">&lt;/enforcing&gt;</span>
  <span class="nt">&lt;enabled&gt;</span>true|false<span class="nt">&lt;/enabled&gt;</span>
<span class="nt">&lt;/hosts_rule&gt;</span>
</code></pre></div></div>

<blockquote>
  <p><strong>NOTE</strong> : The existing positive and enforcing attributes (for vms) will be preserved, and marked as deprecated.
   They will have the same meaning that they had before.</p>
</blockquote>

<p>See example:</p>

<p>GET /api/clusters/00000002-0002-0002-0002-000000000222/affinitygroups</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;affinity_groups&gt;</span>
  <span class="nt">&lt;affinity_group</span> <span class="na">href=</span><span class="s">"/ovirt-engine/api/clusters/00000002-0002-0002-0002-000000000222/affinitygroups/31ef70c1-e636-45a6-9492-aa4fad753e6f"</span> <span class="na">id=</span><span class="s">"31ef70c1-e636-45a6-9492-aa4fad753e6f"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Test_aff_group<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/ovirt-engine/api/clusters/00000002-0002-0002-0002-000000000222/affinitygroups/31ef70c1-e636-45a6-9492-aa4fad753e6f/vms"</span> <span class="na">rel=</span><span class="s">"vms"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/ovirt-engine/api/clusters/00000002-0002-0002-0002-000000000222/affinitygroups/31ef70c1-e636-45a6-9492-aa4fad753e6f/vms"</span> <span class="na">rel=</span><span class="s">"hosts"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;cluster</span> <span class="na">href=</span><span class="s">"/ovirt-engine/api/clusters/00000002-0002-0002-0002-000000000222"</span> <span class="na">id=</span><span class="s">"00000002-0002-0002-0002-000000000222"</span><span class="nt">/&gt;</span>     
    <span class="nt">&lt;positive&gt;</span>true<span class="nt">&lt;/positive&gt;</span>
    <span class="nt">&lt;enforcing&gt;</span>true<span class="nt">&lt;/enforcing&gt;</span>
    <span class="nt">&lt;vms_rule&gt;</span>
      <span class="nt">&lt;positive&gt;</span>true<span class="nt">&lt;/positive&gt;</span>
      <span class="nt">&lt;enforcing&gt;</span>true<span class="nt">&lt;/enforcing&gt;</span>
      <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
    <span class="nt">&lt;/vms_rule&gt;</span>
    <span class="nt">&lt;hosts_rule&gt;</span>
      <span class="nt">&lt;positive&gt;</span>true<span class="nt">&lt;/positive&gt;</span>
      <span class="nt">&lt;enforcing&gt;</span>false<span class="nt">&lt;/enforcing&gt;</span>
      <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
    <span class="nt">&lt;/hosts_rule&gt;</span>
  <span class="nt">&lt;/affinity_group&gt;</span>
<span class="nt">&lt;/affinity_groups&gt;</span>
</code></pre></div></div>
<p>GET /api/clusters/00000002-0002-0002-0002-000000000222/affinitygroups/31ef70c1-e636-45a6-9492-aa4fad753e6f/vms</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;vms&gt;</span>
  <span class="nt">&lt;vm</span> <span class="na">href=</span><span class="s">"/ovirt-engine/api/vms/d4532fce-787b-4e45-ab35-018a1df55e35"</span> <span class="na">id=</span><span class="s">"d4532fce-787b-4e45-ab35-018a1df55e35"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/vms&gt;</span>
</code></pre></div></div>

<p>GET /api/clusters/00000002-0002-0002-0002-000000000222/affinitygroups/31ef70c1-e636-45a6-9492-aa4fad753e6f/hosts</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;hosts&gt;</span>
  <span class="nt">&lt;host</span> <span class="na">href=</span><span class="s">"/ovirt-engine/api/hosts/d4532fce-787b-4e45-ab35-018a1df55e35"</span> <span class="na">id=</span><span class="s">"d4532fce-787b-4e45-ab35-018a1df55e35"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/hosts&gt;</span>
</code></pre></div></div>

<p>POST /api/clusters/00000002-0002-0002-0002-00000000017a/affinitygroups</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;affinity_group&gt;</span>
    <span class="nt">&lt;name&gt;</span>Affinity_Group_A<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;vms&gt;</span>
        <span class="nt">&lt;vm</span> <span class="na">id=</span><span class="s">"adf661d2-747e-4e74-a6bc-25fa2a457c5e"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;vm</span> <span class="na">id=</span><span class="s">"1b0a1ceb-525c-4a12-afee-907c99fac106"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/vms&gt;</span>
    <span class="nt">&lt;hosts&gt;</span>
        <span class="nt">&lt;host</span> <span class="na">id=</span><span class="s">"db8955c4-a167-4195-a072-a9ce01c55295"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;host</span> <span class="na">id=</span><span class="s">"826ff73c-be2d-4c78-a2c5-af9125b6a008"</span><span class="nt">/&gt;</span>&gt;
    <span class="nt">&lt;/hosts&gt;</span>
    <span class="nt">&lt;positive&gt;</span>true<span class="nt">&lt;/positive&gt;</span>
    <span class="nt">&lt;enforcing&gt;</span>true<span class="nt">&lt;/enforcing&gt;</span>
    <span class="nt">&lt;hosts_rule&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
        <span class="nt">&lt;enforcing&gt;</span>false<span class="nt">&lt;/enforcing&gt;</span>
        <span class="nt">&lt;positive&gt;</span>true<span class="nt">&lt;/positive&gt;</span>
    <span class="nt">&lt;/hosts_rule&gt;</span>
    <span class="nt">&lt;vms_rule&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
        <span class="nt">&lt;enforcing&gt;</span>true<span class="nt">&lt;/enforcing&gt;</span>
        <span class="nt">&lt;positive&gt;</span>true<span class="nt">&lt;/positive&gt;</span>
    <span class="nt">&lt;/vms_rule&gt;</span>
    <span class="nt">&lt;cluster</span> <span class="na">id=</span><span class="s">"00000002-0002-0002-0002-00000000017a"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/affinity_group&gt;</span>
</code></pre></div></div>

<p>PUT /api/clusters/00000002-0002-0002-0002-00000000017a/affinitygroups/e7237677-ff5c-47a4-877c-194d525d5f92</p>

<p>DELETE /api/clusters/00000002-0002-0002-0002-00000000017a/affinitygroups/e7237677-ff5c-47a4-877c-194d525d5f92</p>

<p>For more information see the following Bugzilla link:
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1392393">https://bugzilla.redhat.com/show_bug.cgi?id=1392393</a></p>

<p>Deep dive:
<a href="https://www.youtube.com/watch?v=rs_5BSqacWE">https://www.youtube.com/watch?v=rs_5BSqacWE</a></p>

<p><a href="/ovirt-site/previews/3196/develop/release-management/features/sla/affinity-rules-enforcement-manager.html">Affinity Rules Enforcement Manager</a>
<a href="/ovirt-site/previews/3196/develop/release-management/features/sla/vm-affinity.html">VM Affinity</a></p>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3196/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3196/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3196/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3196/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2025 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/sla/soft-host-to-vm-affinity-support.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/sla/soft-host-to-vm-affinity-support.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
