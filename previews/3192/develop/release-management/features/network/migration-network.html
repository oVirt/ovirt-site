<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Migration Network | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Migration Network" />
<meta name="author" content="Alona Kaplan" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3192/develop/release-management/features/network/migration-network.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3192/develop/release-management/features/network/migration-network.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Migration Network" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Alona Kaplan" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Alona Kaplan"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Migration Network","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3192/images/logo.svg"},"name":"Alona Kaplan"},"url":"https://ovirt.github.io/ovirt-site/previews/3192/develop/release-management/features/network/migration-network.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3192/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3192/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3192/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3192/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3192/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3192/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3192/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3192/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3192/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3192/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3192/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3192/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3192/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3192/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3192//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3192//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/develop/">
              <span property="name">Joining the developers community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3192/develop/release-management/features/network/">
              <span property="name">Network</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/d3fd70f530336c1d9da52f61cffcd3e4?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/d3fd70f530336c1d9da52f61cffcd3e4?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Alona Kaplan">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Alona Kaplan</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Dan Kenigsberg">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Dan Kenigsberg</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/efe5247fc80210a9f71740ed570764bf?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/efe5247fc80210a9f71740ed570764bf?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Igor Lvovsky">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Igor Lvovsky</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/d2a1475a4145a459ac3565cc97fa39f5?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/d2a1475a4145a459ac3565cc97fa39f5?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Martin Pavlik">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Martin Pavlik</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3192/documentation/'>Documentation is available here.</a></div>

<h1 id="migration-network">Migration Network</h1>

<h2 id="summary">Summary</h2>

<p>Define a migration network role, and use such networks to carry migration data</p>

<h2 id="owner">Owner</h2>

<ul>
  <li>Name: Alona Kaplan (alkaplan)</li>
</ul>

<!-- -->

<ul>
  <li>Email: <a href="mailto:alkaplan@redhat.com">alkaplan@redhat.com</a></li>
</ul>

<h2 id="current-status">Current status</h2>

<ul>
  <li>oVirt-3.3</li>
  <li>Last updated: ,</li>
</ul>

<h2 id="detailed-description">Detailed Description</h2>

<p>When Engine requests to migrate a VM from one node to another, the VM state (Bios, IO devices, RAM) is transferred over a TCP/IP connection that is opened from the source <code class="language-plaintext highlighter-rouge">qemu</code> process to the destination <code class="language-plaintext highlighter-rouge">qemu</code>. Currently, destination qemu listens for the incoming connection on the management IP address of the destination host. This has serious downsides: a “migration storm” may choke the destination’s management interface; migration is plaintext and ovirtmgmt includes Engine which sits may sit the node cluster.</p>

<p>With this feature, a cluster administrator may grant the “migration” role to one of the cluster networks. Engine would use that network’s IP address on the destination host when it requests a migration of a VM. With proper network setup, migration data would be separated to that network.</p>

<h2 id="benefit-to-ovirt">Benefit to oVirt</h2>

<ul>
  <li>Users would be able to define and dedicate a separate network for migration. Users that need quick migration would use nics with high bandwidth. Users who want to cap the bandwidth consumed by migration could define a migration network over nics with bandwidth limitation.</li>
  <li>Migration data can be limited to a separate network, that has no layer-2 access from Engine</li>
  <li>Having a migration-specific network is one step towards capping/promising migration bandwidth. With this feature applied, this could be done with the help of external switches. In the future, we plan to let the end admin set QoS properties on each oVirt-defined network.</li>
</ul>

<h2 id="dependencies--related-features">Dependencies / Related Features</h2>

<h3 id="vdsm">Vdsm</h3>

<p>The <code class="language-plaintext highlighter-rouge">migrate</code> verb should be extended with an additional parameter, specifying the address that the remote <code class="language-plaintext highlighter-rouge">qemu</code> process should listen on. A new argument is to be added to the currently-defined migration arguments:</p>

<ul>
  <li>vmId: UUID</li>
  <li>dst: management address of destination host</li>
  <li>dstparams: hibernation volumes definition</li>
  <li>mode: migration/hibernation</li>
  <li>method: rotten legacy</li>
  <li><strong>dstqemu</strong>: dedicated migration address of destination host. Would be used to build libivrt’s <code class="language-plaintext highlighter-rouge">miguri</code> <a href="https://libvirt.org/html/libvirt-libvirt-domain.html#virDomainMigrateToURI2">argument</a> such as <code class="language-plaintext highlighter-rouge">tcp://&lt;ip of migration network on remote node&gt;</code>.</li>
</ul>

<p>Note that the migration protocol requires Vdms-Vdsm and libvirt-libvirt communication. Both are routed over the management network even when the new dstqemu argument is used.</p>

<h3 id="engine">Engine</h3>

<ol>
  <li>Network definition.
    <ul>
      <li>A new network role - not unlike “display network” should be added.Only one migration network should be defined on a cluster.</li>
      <li>If none is defined, the legacy “use ovirtmgmt for migration” behavior would apply.</li>
      <li>A migration network is more likely to be a <em>required</em> network, but a user may opt for non-required. He may face unpleasant surprises if he wants to migrate his machine, but no candidate host has the network available.</li>
      <li>The “migration” role can be granted or taken on-the-fly, when hosts are active, as long as there are no currently-migrating VMs.</li>
    </ul>
  </li>
  <li>Scheduler:
    <ul>
      <li>When deciding which host should be used for automatic migration, take into account the existence and availability of the migration network on the destination host.</li>
      <li>For manual migration, let user migrate a VM to a host with no migration network - if the admin wants to keep jamming the management network with migration traffic, let her.</li>
      <li>Just like choosing the destination host, the user may choose a specific migration network. If host is not selected then allow to choose from cluster’s networks. The default should be the cluster’s migration network.</li>
    </ul>
  </li>
  <li>migration verb.
    <ul>
      <li>For a modern cluster level, with migration network defined on the destination host, an additional <em>dstqemu</em> parameter should be added to the <code class="language-plaintext highlighter-rouge">migrate</code> command</li>
    </ul>
  </li>
</ol>

<h3 id="screen-shots">Screen shots</h3>

<p><img src="/ovirt-site/previews/3192/images/wiki/EditMigration.png" alt="" /> <img src="/ovirt-site/previews/3192/images/wiki/MigrationSubTab.png" alt="" /> <img src="/ovirt-site/previews/3192/images/wiki/MigrationSetupNetwork.png" alt="" /></p>

<h2 id="development-phases">Development Phases</h2>

<h3 id="first-phase">First phase</h3>

<ul>
  <li>Add a new network role of migration network.</li>
  <li>Each cluster has one, and it is the default migration network for VMs on the cluster.</li>
  <li>Factory default is that ovirtmgmt is the cluster migration network.</li>
</ul>

<p><em>Target:</em> oVirt -3.3</p>

<h3 id="second-phase">Second phase</h3>

<ul>
  <li>Add a per-VM property of migrationNetwork. If Null, the cluster migrationNetwork would be used.</li>
  <li>Let the user override the VM migration network in the migrate API and in the GUI.</li>
</ul>

<p><em>Target:</em> TBD</p>

<h2 id="testing">Testing</h2>

<ul>
  <li>Set up a cluster of at least two hosts, and have them inter-connected via two different networks. Simplest form is to have two NICs on each host.</li>
  <li>One NIC should be used by the management network, and the other - by the migration network. Use the new GUI to configure your hosts appropriately.</li>
  <li>Start a VM on one machine, and migrate it to the other. Verify that migration succeeds.</li>
  <li>Sniff the traffic on the source and destination hosts while migration is going on. Verify that qemu-to-qemu migration traffic is limited to the migration network.</li>
  <li>Command that can be used to check traffic flow
    tcpdump -tnni any -c 30000 | awk -F “.” ‘{print $1”.”$2”.”$3”.”$4}’ | sort | uniq -c | sort -nr | awk ‘ $1 &gt; 1000 ‘</li>
</ul>

<p>| Test                                                                   | Steps                                                                        | Expected Result                                                                                                        | Status | Version | Note                                                      |
|————————————————————————|——————————————————————————|————————————————————————————————————————|——–|———|———————————————————–|</p>

<p>| Dedicated migration network                                            | 1) Assign migration role to the network                                    <br />
                                                                          2) Attach the network to the host (do not forget to setup IP)               <br />
                                                                          3) Migrate VMs between nodes                                                  | 1) Role assigned                                                                                                     <br />
                                                                                                                                                         2) Network attached                                                                                                   <br />
                                                                                                                                                         3) Successful migration which happens over dedicated migration network                                                  |        |         | Test for: regular network, bridgeless network, VLAN, bond |</p>

<table>
  <tbody>
    <tr>
      <td>Migrate VM which has attached migration network</td>
      <td>1) Run the VM</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>2) Migrate the VM with migration network attached over the migration network</td>
      <td>1) -</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>2) Migration successful</td>
      <td> </td>
      <td> </td>
      <td>Test for: regular network, bridgeless network, VLAN, bond</td>
    </tr>
  </tbody>
</table>

<p>| Automatic migration                                                    | 1) Assign migration role to the network                                    <br />
                                                                          2) Attach the network to hosts (do not forget to setup IP)                  <br />
                                                                          3) Attach another required network (NET2) to hosts                          <br />
                                                                          4) Run VM/s on one of the hosts                                             <br />
                                                                          5) Take down NET2 interface on host with running VM/s                         | 1) Role assigned                                                                                                     <br />
                                                                                                                                                         2) Migration network attached                                                                                         <br />
                                                                                                                                                         3) network NET2 attached to host                                                                                      <br />
                                                                                                                                                         4) VM/s running                                                                                                       <br />
                                                                                                                                                         5) VM/s auto migrated over migration network                                                                            |        |         | Test for: regular network, bridgeless network, VLAN, bond |</p>

<p>| Higher MTU                                                             | 1) Create network with MTU=9000                                            <br />
                                                                          2) Assign migration role to the network                                     <br />
                                                                          3) Attach the network to the host (do not forget to setup IP)               <br />
                                                                          4) Migrate VMs between nodes                                                  | 1) -                                                                                                                 <br />
                                                                                                                                                         2) -                                                                                                                  <br />
                                                                                                                                                         3) -                                                                                                                  <br />
                                                                                                                                                         4) Migration successful, MTU 9000 is used (verify by tcpdump or some other network tool)                                |        |         | Test for: regular network, bridgeless network, VLAN, bond |</p>

<table>
  <tbody>
    <tr>
      <td>Remove dedicated migration network</td>
      <td>1) Remove dedicated migration network/s</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>2) Migrate VMs</td>
      <td>1) Networks removed</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>2) VMs successfully migrate over management network</td>
      <td> </td>
      <td> </td>
      <td>Test for: regular network, bridgeless network, VLAN, bond</td>
    </tr>
  </tbody>
</table>

<p>| Migrate to host without migration network (this test requires 2 hosts) | 1) Assign migration role to the network                                    <br />
                                                                          2) Attach the network to <strong>one</strong> host (do not forget IP)                    <br />
                                                                          3) Migrate VMs between nodes                                                  | 1) Role assigned                                                                                                     <br />
                                                                                                                                                         2) Network attached                                                                                                   <br />
                                                                                                                                                         3) Manual migration should be possible, even if node does not have migration network (management network will be used)  |        |         | Test for: regular network, bridgeless network, VLAN, bond |</p>

<table>
  <tbody>
    <tr>
      <td>Remove dedicated migration network</td>
      <td>1) Remove dedicated migration network/s</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>2) Migrate VMs</td>
      <td>1) Networks removed</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>2) VMs successfully migrate over management network</td>
      <td> </td>
      <td> </td>
      <td>Test for: regular network, bridgeless network, VLAN, bond</td>
    </tr>
  </tbody>
</table>

<p>| Migration network interface failure                                    | 1) Assign migration role to the network                                    <br />
                                                                          2) Attach the network to cluster as required                                <br />
                                                                          3) Attach the network to hosts (do not forget to setup IPs)                 <br />
                                                                          4) Take down migration interface on one host                                <br />
                                                                          5) Change the migration network to non-rquired                              <br />
                                                                          6) Reactivate the host                                                      <br />
                                                                          7) Migrate VMs between nodes&lt;/br&gt;                                             | 1) Migration role assigned                                                                                           <br />
                                                                                                                                                         2) Network attached to cluster                                                                                        <br />
                                                                                                                                                         3) Network attached to host                                                                                           <br />
                                                                                                                                                         4) Host goes non-opertational                                                                                         <br />
                                                                                                                                                         5) -                                                                                                                  <br />
                                                                                                                                                         6) Host UP (migration interface still down)                                                                           <br />
                                                                                                                                                         7) Migration fails                                                                                                      |        |         | Test for: regular network, bridgeless network, VLAN, bond |</p>

<p>| Wrong / missing IPs                                                    | 1) Assign migration role to the network                                    <br />
                                                                          2) Attach the network to the host                                           <br />
                                                                          3) Set IP just for one host                                                 <br />
                                                                          4) Migrate VMs between nodes                                                <br />
                                                                          5) Set wrong IP/netmask on one of the hosts                                 <br />
                                                                          6) Migrate VMs between nodes                                                  | 1) -                                                                                                                 <br />
                                                                                                                                                         2) -                                                                                                                  <br />
                                                                                                                                                         3) IP set</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                                                                                                                                                     3a) IF the destination host is the one with the ip- should succeed                                                      

                                                                                                                                                     3b) IF the destination has DHCP set as boot protocol- it also should succeed                                            

                                                                                                                                                     4) -                                                                                                                    
                                                                                                                                                     5) Wrong IP set                                                                                                         
                                                                                                                                                     6) -                                                                                                                    

                                                                                                                                                     6a) IF the destination host has wrong ip on the migration network- should fail.                                         

                                                                                                                                                     6b) IF the origin host- should succeed.                                                                                 |        |         | Test for: regular network, bridgeless network, VLAN, bond |
</code></pre></div></div>

<table>
  <tbody>
    <tr>
      <td>Migration and display network</td>
      <td>1) Assign migration network also display network role</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>2) Live migrate multiple VMs with open spice consoles</td>
      <td>1) -</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>2) Migration successful, spice consoles displaying correctly</td>
      <td> </td>
      <td> </td>
      <td>Test for: regular network, bridgeless network, VLAN, bond</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>Negative: Migration network is N/A for lower cluster/dc version</td>
      <td>1) Assign migration network role on DC/CL lower than 3.3</td>
      <td>1) Migration network role cannot be assigned on DC/CL lower than 3.3</td>
      <td> </td>
      <td> </td>
      <td>Test for: regular network, bridgeless network, VLAN, bond</td>
    </tr>
  </tbody>
</table>

<h2 id="known-limitations">Known Limitations</h2>

<ul>
  <li>The address of the migration network must live on the same subnet for both hosts. If it is not, qemu cannot guess the correct source address to use, so traffic would flow via the default gateway. <strong>TODO</strong>: open qemu and libvirt RFEs to allow specifying the source IP address of migration traffic.</li>
</ul>

<h2 id="documentation--external-references">Documentation / External references</h2>

<ul>
  <li>Yuval M asking to choose a network for migration data: <a href="https://lists.ovirt.org/pipermail/users/2013-January/011301.html">https://lists.ovirt.org/pipermail/users/2013-January/011301.html</a></li>
</ul>

<h2 id="comments-and-discussion">Comments and Discussion</h2>

<ul>
  <li>Currently, there is a bug when the boot protocol of the migration network is dhcp. Sometimes the engine doesn’t get in time the ip of the network from the dhcp server. In this case, when the migration command will be invoked the engine won’t have the ip address of the migration network. It will cause the migration to be done on the fallback (management) network. Bug Url- <a href="https://bugzilla.redhat.com/show_bug.cgi?id=642551">https://bugzilla.redhat.com/show_bug.cgi?id=642551</a></li>
</ul>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3192/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3192/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3192/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3192/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2024 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/network/migration-network.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/network/migration-network.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
