<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Unrestricted Network Names | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Unrestricted Network Names" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2860/develop/release-management/features/network/unrestricted-network-names.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2860/develop/release-management/features/network/unrestricted-network-names.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Unrestricted Network Names" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Unrestricted Network Names","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2860/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/2860/develop/release-management/features/network/unrestricted-network-names.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2860/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2860/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2860/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2860/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2860/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2860/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2860/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2860/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2860/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2860/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2860/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/2860/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/2860/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/2860/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/2860/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/2860/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2860/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2860/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2860/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2860/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2860/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2860/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2860//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2860//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2860/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2860/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2860/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2860/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2860/develop/release-management/features/network/">
              <span property="name">Network</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Dan Kenigsberg</span></p>
                      
                    </section>
                  </span>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/2860/documentation/'>Documentation is available here.</a></div>

<h1 id="unrestricted-network-names">Unrestricted Network Names</h1>

<h3 id="summary">Summary</h3>

<p>Let users give any name to their network</p>

<h2 id="owner">Owner</h2>

<ul>
  <li>Name: Dan Kenigsberg (Danken)</li>
</ul>

<!-- -->

<ul>
  <li>Email: <a href="mailto:danken@redhat.com">danken@redhat.com</a></li>
</ul>

<h2 id="detailed-description">Detailed Description</h2>

<p>Currently, oVirt limits the names of its networks to 15 alphanumeric characters. This limitation dates back to the ages where all networks were VM network, all were implemented by a Linux bridge, and the same name was used to identify the network and the Linux bridge implementing it on each host.</p>

<p>That has to change. 15 characters are not enough for humans; spaces, and other special characters are visually useful, and non-English speaking users would love to use their native alphabet in network names.</p>

<h2 id="benefit-to-ovirt">Benefit to oVirt</h2>

<ul>
  <li>The limitations on network names seem arbitrary and annoy users.</li>
  <li>When importing a network from Neutron, we’d like to refer to it with its Neutron-native name, not some partly-legible shorthand.</li>
  <li>It’s plain wrong to expose Linux’s IFNAMSIZ all the way up to the GUI.</li>
</ul>

<h2 id="dependencies--related-features">Dependencies / Related Features</h2>

<p>Currently, the Engine/Vdsm API hinges on the network name, and assumes that (for VM networks) the created bridge would be named just like its network. Any solution must allow migration of VMs from existing hosts to hosts with this new feature enabled, as well as a seamless upgrade from an old clusterLevel to a clusterLevel supported unrestricted names.</p>

<h2 id="suggested-solution">Suggested Solution</h2>

<p>We will make no change in the Engine/Vdsm API. This makes backward compatibility with running Vms and in upgraded hosts a non-issue.</p>

<p>A new field, “vdsm_name”, is to be added to the network entity. When a new network is added, its existing “name” has to be provided by the human actor. “name” is to be editable by the end user, and exposed as the name of the network over REST (as it is today); “vdsm_name” would be immutable once the network is attached to a host (similarly to “name”) and to be used only for Engine/Vdsm communication.</p>

<p>The new “vdsm_name” will match “name”, if “name” doesn’t exceed IFNAMSIZ and only contains ASCII characters (to ease debugging and backwards compatibility). Otherwise, the new “vdsm_name” is to be auto-generated by Engine according to a pattern</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  onXXXXXXXXXXXXX
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">XXXXXXXXXXXXX</code> are 13 hexadecimal characters extracted from the UUID of the network.</p>

<p>As aforementioned, Engine/Vdsm communication will now be made via “vdsm_name”, while all intra Engine communication will remain via “name”. The discrepancy will be filled by using a “name” and
“vdsm_name” mapping; communication to Vdsm from Engine will be preceded with looking up the relevant “vdsm_name” using “name”, and vice versa.</p>

<h3 id="upgrade">Upgrade</h3>

<p>On upgrade, the “name” of existing networks would be copied into their “vdsm_name”. REST-based scripts and GUI users would not see a difference. However, they could now edit “name” with no Linux-based limitations.</p>

<h3 id="ui-considerations">UI considerations</h3>

<p>The user interface currently takes advantage of the narrow name field for networks. Once we lift the restrictions, and allow names in languages such a Japanese which commonly requires wide text columns, we would have to make some UI adjustments. Possible tricks are: tooltip showing the complete name, adjustable tables, in-UI limitation on name lengths.</p>

<p>This would affect anywhere a network name shows up, and in particular:</p>

<ul>
  <li>the setup networks dialog</li>
  <li>host interfaces sub-tab and vm interfaces sub tab</li>
  <li>the Add/Edit vm dialog</li>
  <li>the vm’s boot sequence dialog.</li>
  <li>…</li>
</ul>

<h3 id="debuggability-drawback">Debuggability Drawback</h3>

<p>Currently, if a user has a connectivity issue regarding a network FOO on one of his hosts, he can easily look FOO up in Engine. Now this would become more difficult, as the host is no longer exposed to a human-legible name. We should supply means to alleviate this:</p>

<ol>
  <li>A dedicated script (…ovirt-engine/bin/vdsm_to_network_name_map) that lists vdsm_name name per each network.</li>
  <li>Make it possible to look a network up based on its vdsm_name (<code class="language-plaintext highlighter-rouge">onXXXXXXXXXXXXX</code>) in the network tab and in via the search box</li>
  <li>Let users control <code class="language-plaintext highlighter-rouge">vdsm_name</code> of a network before any running VM is using it. The user may choose a more human-friendly name for the bridge.</li>
  <li>Another possible remedy is to expose <code class="language-plaintext highlighter-rouge">visible_name</code> to the host when setting or changing a network via <code class="language-plaintext highlighter-rouge">setupNetwork</code>. The human-visible name would be persisted as comments on the local host, and would be available for inspection by debuggers.</li>
</ol>

<h3 id="documentation--external-references">Documentation / External references</h3>

<ul>
  <li><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1121101">Editable logical network name</a></li>
</ul>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2860/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2860/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2860/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2860/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/network/unrestricted-network-names.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/network/unrestricted-network-names.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
