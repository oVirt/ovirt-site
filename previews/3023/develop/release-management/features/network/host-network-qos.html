<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Host Network QoS | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Host Network QoS" />
<meta name="author" content="Assaf Muller" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3023/develop/release-management/features/network/host-network-qos.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3023/develop/release-management/features/network/host-network-qos.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Host Network QoS" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Assaf Muller" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Assaf Muller"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Host Network QoS","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3023/images/logo.svg"},"name":"Assaf Muller"},"url":"https://ovirt.github.io/ovirt-site/previews/3023/develop/release-management/features/network/host-network-qos.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3023/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3023/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3023/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3023/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3023/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3023/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3023/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3023/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3023/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3023/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3023/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3023/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3023/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3023/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3023/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3023/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3023/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3023/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3023/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3023/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3023/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3023/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3023//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3023//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3023/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3023/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3023/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3023/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3023/develop/release-management/features/network/">
              <span property="name">Network</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/d7aa61bce7ade9bd95d59605ce3b4d6e?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/d7aa61bce7ade9bd95d59605ce3b4d6e?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Assaf Muller">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Assaf Muller</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Dan Kenigsberg">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Dan Kenigsberg</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/379934cbb8b253782d94cc204604fd98?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/379934cbb8b253782d94cc204604fd98?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Giuseppe Vallarelli">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Giuseppe Vallarelli</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/9a2fc6e0042ddce31e9484d1ed181663?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/9a2fc6e0042ddce31e9484d1ed181663?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Lior Vernia">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Lior Vernia</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3023/documentation/'>Documentation is available here.</a></div>

<h1 id="host-network-qos">Host Network QoS</h1>

<h3 id="summary">Summary</h3>

<p>This feature provides means by which to control the traffic of a specific network through a host’s physical interface. It is a natural extension of the <a href="/ovirt-site/previews/3023/develop/sla/network-qos.html">VM Network QoS</a> feature, which provided the same functionality for a VM network through a VM’s virtual interface.</p>

<p>You may also refer to the <a href="/ovirt-site/previews/3023/develop/release-management/features/network/detailed-host-network-qos.html">detailed feature page</a>.</p>

<h3 id="owner">Owner</h3>

<ul>
  <li>Name: Lior Vernia (previously owned by Giuseppe Vallarelli)</li>
  <li>E-mail: lvernia@redhat.com</li>
  <li>IRC: lvernia at #ovirt (irc.oftc.net)</li>
</ul>

<h3 id="detailed-description">Detailed Description</h3>

<p>Generally speaking, network QoS (Quality of Service) in oVirt could be applied on a variety of different levels:</p>

<ul>
  <li>VM - control the traffic passing through a virtual NIC (virtual Network Interface Controller).</li>
  <li>Host - control the traffic from a specific network passing through a physical NIC.</li>
  <li>DC (Data Center) - control the traffic related to a specific logical network throughout the entire DC, including through its infrastructure (e.g. L2 switches).</li>
</ul>

<p>The VM level was taken care of as part of the <a href="/ovirt-site/previews/3023/develop/sla/network-qos.html">VM Network QoS</a> feature in oVirt 3.3, whereas this feature aims to take care of the host level in a similar manner; it will be possible to cap bandwidth usage of a specific network on a specific network interface of a host, both for average usage and peak usage for a short period of time (“burst”), so that no single network could “clog” an entire physical interface.</p>

<p>DC-wide QoS remains to be handled in the future.</p>

<h3 id="benefit-to-ovirt">Benefit to oVirt</h3>

<p>This feature would help to prevent situations in which two or more networks are attached to the same physical NIC of a host, where one of the two networks is prone to heavy traffic and could potentially overutilize the NIC to the point where the other network(s) don’t function.</p>

<p><img src="/ovirt-site/previews/3023/images/wiki/Host_network_qos.png" alt="" /></p>

<p>One oVirt 3.3 feature that could specifically benefit from host-level QoS is <a href="/ovirt-site/previews/3023/develop/release-management/features/network/migration-network.html">Migration Network</a>, which enabled to designate a specific network to be used for VM migration, to avoid burdening the management network. For the management network to continue functioning properly, it would likely have to be attached to a different network interface on the host, otherwise migration-related traffic could easily lead to congestion. Being able to configure network QoS on the host level means that these two networks could now reside on the same physical NIC without fear of congestion, as can be seen in the diagram above.</p>

<h3 id="testing">Testing</h3>

<p>The following steps should be tested:</p>

<ol>
  <li>Create a non-VM network and assign it to a host.</li>
  <li>Edit the network, create a new (non-empty) QoS entity from that dialog.</li>
  <li>Verify that the newly-created QoS entity is the default selection in the list box, and approve of the dialog.</li>
  <li>Verify that the network appears as out-of-sync in the host’s Setup Networks dialog.</li>
  <li>Edit the network (hover + click on pencil icon), mark it to be synchronized and approve of the Setup Networks dialog.</li>
  <li>Verify that the network’s QoS configuration is applied to the host (possibly by running “vdsClient [-s] 0 getVdsCaps” on the host’s command line).</li>
  <li>Edit the network on the host again, this time checking the “QoS override” checkbox and configuring other QoS values directly on the interface.</li>
  <li>Again verify that the QoS configuration is applied to the host.</li>
  <li>Edit the network entity, and set its QoS configuration to “Unlimited”.</li>
  <li>Verify that the network does NOT appear as out-of-sync on the host.</li>
  <li>Functional test - initiate usage of the network to which QoS had been applied, monitor the traffic on it and verify that it is capped according to the QoS limitations.</li>
  <li>Move the host to a different cluster, whose compatibility version is smaller than 3.4; verify that it is no longer possible to override the QoS configuration on an interface via the Setup Networks dialog.</li>
</ol>

<h3 id="comments-and-discussion">Comments and Discussion</h3>

<p>On the devel@ovirt.org and users@ovirt.org mailing lists.</p>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3023/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3023/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3023/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3023/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/network/host-network-qos.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/network/host-network-qos.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
