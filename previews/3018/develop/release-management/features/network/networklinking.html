<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>NetworkLinking | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="NetworkLinking" />
<meta name="author" content="Alona Kaplan" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3018/develop/release-management/features/network/networklinking.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3018/develop/release-management/features/network/networklinking.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="NetworkLinking" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Alona Kaplan" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Alona Kaplan"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"NetworkLinking","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3018/images/logo.svg"},"name":"Alona Kaplan"},"url":"https://ovirt.github.io/ovirt-site/previews/3018/develop/release-management/features/network/networklinking.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3018/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3018/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3018/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3018/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3018/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3018/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3018/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3018/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3018/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3018/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3018/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3018/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3018/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3018/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3018/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3018/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3018/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3018/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3018/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3018/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3018/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3018/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3018//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3018//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3018/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3018/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3018/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3018/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3018/develop/release-management/features/network/">
              <span property="name">Network</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/d3fd70f530336c1d9da52f61cffcd3e4?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/d3fd70f530336c1d9da52f61cffcd3e4?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Alona Kaplan">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Alona Kaplan</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/ce421080e5d2da87febb626f6e8906c9?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Dan Kenigsberg">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Dan Kenigsberg</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/92d19be4e66f497e670d018d02158d5a?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/92d19be4e66f497e670d018d02158d5a?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Livnat Peer">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Livnat Peer</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/90758110b19ee0a2e03473012fdc1bd7?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/90758110b19ee0a2e03473012fdc1bd7?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Moti Asayag">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Moti Asayag</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/2141b2c089d81202329756890d5270a2?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/2141b2c089d81202329756890d5270a2?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Vered Volansky">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Vered Volansky</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3018/documentation/'>Documentation is available here.</a></div>

<h1 id="network-linking">Network Linking</h1>

<h2 id="summary">Summary</h2>

<p>The network wiring feature is an enhancement for the VM Network Interface management.
It supports the following actions without unplugging the Vnic, and it maintains the device address of the Vnic:</p>

<ul>
  <li>Dynamically changing the network of a running VM.</li>
  <li>Unwiring a network of a VM.</li>
</ul>

<h2 id="owner">Owner</h2>

<ul>
  <li>Name: Alona Kaplan (alkaplan)</li>
  <li>Email: <a href="mailto:alkaplan@redhat.com">alkaplan@redhat.com</a></li>
</ul>

<h2 id="current-status">Current status</h2>

<p><a href="/ovirt-site/previews/3018/develop/release-management/features/network/detailednetworklinking.html">Network Linking Detailed Design</a></p>

<ul>
  <li>Last update date: 04/11/2012</li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>Currently oVirt engine supports configuring the VM Network Interface either on creation or updating it when the VM is down.</p>

<ul>
  <li>oVirt-engine already supports hot-plug and hot-unplug of vnics, however it lacks the capability of performing changes of the Vnic once the Vnic is plugged and to preserve the Vnic’s PCI address.</li>
</ul>

<h3 id="high-level-feature-description">High Level Feature Description</h3>

<p>A Vnic on a running VM can have 4 states (If the VM is down, its state represents how it should behave once started)</p>

<ul>
  <li><strong>Plugged</strong>
    <ul>
      <li><strong>Link State- up</strong> - The Vnic is defined on the VM and connected to the Network.
        <ul>
          <li>Observed as the vnic is located on its slot and a network cable is connected to it.</li>
          <li>This is the only state on which the state of the VM Network Interface is ‘Active’.</li>
        </ul>
      </li>
      <li><strong>Link State- down</strong> - The Vnic is defined on the VM and isn’t connected to any network.
        <ul>
          <li>Observed as the vnic is located on its slot but no network cable is connected to it.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Unplugged</strong> - at this state the Vnic is defined on oVirt-engine only
    <ul>
      <li><strong>Link State- up</strong> - once the Vnic is plugged it will automatically be connected to the Network and become ‘Active’.</li>
      <li><strong>Link State- down</strong> - once the Vnic is plugged it won’t be connected to any network.</li>
    </ul>
  </li>
  <li>The Link-State doesn’t affect the validations:
    <ul>
      <li>The Network is considered as a required resource of the VM regardless the link state. If Link-State is down, the Network remains required by the vnic.
        <ul>
          <li>E.g. if a user has a VM with Vnic using Network “Red” and its Link-State is “down”, he won’t be able to run the VM if “Red” is not attached to the Host.</li>
        </ul>
      </li>
      <li>Setting an ‘empty’ Network to the vnic emphasizes Network is no longer required by the vnic.</li>
    </ul>
  </li>
</ul>

<p>The oVirt-engine’s user will be able to configure the Vnic state to any of the mentioned above by any of the following methods:</p>

<ul>
  <li>API</li>
  <li>Admin portal</li>
  <li>User portal</li>
</ul>

<h3 id="user-experience">User Experience</h3>

<h3 id="adminuser-portal">Admin/User Portal</h3>

<h4 id="virtual-machines-network-interfaces-sub-tab-view-changes">Virtual Machines Network Interfaces sub-tab View Changes</h4>

<ul>
  <li><strong>New Columns</strong>
    <ul>
      <li>“Plugged”- will be added after “Name” column.</li>
      <li>“Link State”- will be added after “Network Name” column.</li>
    </ul>
  </li>
  <li><strong>Updated Columns</strong>
    <ul>
      <li>“Status” icon - green icon if plugged and link state- up, otherwise red icon. The tooltip will display a text for both the “Plugged” and “Link state” statuses.</li>
    </ul>
  </li>
</ul>

<h4 id="virtual-machines-network-interfaces-action-changes">Virtual Machines Network Interfaces Action Changes</h4>

<ul>
  <li><strong>Removed Actions</strong>
    <ul>
      <li>Activate/Deactivate
        <ul>
          <li>These actions will be removed from the sub-tab’s action menu and from the context menu (The user will be able to plug/unplug the Vnic’s via the add/edit Vnic dialogs)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Updated Actions</strong>
    <ul>
      <li>Add
        <ul>
          <li>Dialog
            <ul>
              <li>Adding empty cell to “network” combo. (For 3.2 or more cluster version)</li>
              <li>Adding under the “network” combo- “Link state” radio button with two options “up/”down”. (For 3.2 or more cluster version)</li>
              <li>If “empty” network is selected, link state combo should be disabled with explanation tooltip.</li>
              <li>“Activate” checkbox will be changed to a radio button with two options “Plugged”/”Unplugged” and its name will be renamed to ‘Card Status’.</li>
              <li>Add ‘Advanced Parameters’ section which includes the ‘Port Mirroring’ and the ‘Card Status’ properties.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Edit
        <ul>
          <li>Menu
            <ul>
              <li>Edit action will be enabled for VMs in status ‘UP’ (previously it was allowed only for VMs in ‘Down’ status).</li>
            </ul>
          </li>
          <li>Dialog
            <ul>
              <li>If the VM status is ‘UP’
                <ul>
                  <li>If the Vnic is plugged “mac” and “type” editor should be disables with explanation tooltip (“In order to change ‘MAC’/’type’ please Unplug and then Plug again”).</li>
                </ul>
              </li>
              <li>If cluster version beneath 3.2 and the vnic is plugged, the network name editor should be disabled with explanation tooltip.
                <ul>
                  <li>Port Mirroring - If the Vnic is plugged and the Vnic is set for port mirroring - “network”, “type”, “mac” and “port mirroring” fields in the dialog will be disabled.</li>
                  <li>Stretched Goal - To enable dynamic changes when port mirroring is set (without plugging and unplugging).</li>
                </ul>
              </li>
              <li>Adding empty cell to “network” combo. (For 3.2 or more cluster version)</li>
              <li>Adding under the “network” combo- “Link state” radio button with two options “up/”down”. (For 3.2 or more cluster version)</li>
              <li>If “empty” network is selected, link state combo should be disabled with explanation tooltip.</li>
              <li>Adding radio button named ‘Card Status’ with two options “Plugged”/”Unplugged” to the end of the dialog..</li>
              <li>Add ‘Advanced Parameters’ section which includes the ‘Port Mirroring’ and the ‘Card Status’ properties.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><img src="/ovirt-site/previews/3018/images/wiki/VnicWiring.png" alt="" /></p>

<h3 id="rest-api">REST API</h3>

<p>NIC properties:</p>

<p>Changes:</p>

<ul>
  <li>Adding new properties under VM NIC:
    <ul>
      <li>plugged</li>
      <li>link_state (“up”/ “down”)</li>
    </ul>
  </li>
  <li>Deprecating the active property under VM NIC</li>
  <li>Deprecating activate/deactivate actions</li>
  <li>plug/unplug and changing link_state (up/down) on a vnic, will be done via PUT action on the VM NIC
    <ul>
      <li><code class="language-plaintext highlighter-rouge">/api/vms/{vm:id}/nics/{nic:id}/</code></li>
    </ul>
  </li>
  <li>Add support to no network (“<code class="language-plaintext highlighter-rouge">&lt;network/&gt;</code>”) on the NIC.</li>
</ul>

<p>There is no reason to have dedicated actions for plug/unplug or changing link_state. The original reason for having them was that edit VM nic while the VM was up used to be blocked and now we’ll enable doing these actions.</p>

<h2 id="benefit-to-ovirt">Benefit to oVirt</h2>

<p>The feature is an enhancement of the oVirt-engine Vnic management:</p>

<ul>
  <li>Dynamically updating the Vnic configuration by the admin or by the user.</li>
</ul>

<h2 id="dependencies--related-features">Dependencies / Related Features</h2>

<p>The Network Permissions is dependent on the following features:</p>

<ul>
  <li><a href="/ovirt-site/previews/3018/develop/release-management/features/network/networkpermissions.html">Permission on Networks</a></li>
</ul>

<p>Affected oVirt projects:</p>

<ul>
  <li>oVirt-engine
    <ul>
      <li>API</li>
      <li>Admin Portal</li>
      <li>User Portal</li>
    </ul>
  </li>
  <li>VDSM</li>
</ul>

<h2 id="documentation--external-references">Documentation / External references</h2>

<p>Bugzilla - <a href="https://bugzilla.redhat.com/show_bug.cgi?id=840692">https://bugzilla.redhat.com/show_bug.cgi?id=840692</a></p>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3018/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3018/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3018/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3018/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/network/networklinking.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/network/networklinking.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
