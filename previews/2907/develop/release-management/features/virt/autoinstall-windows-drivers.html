<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Automatic installation of Windows drivers | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Automatic installation of Windows drivers" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2907/develop/release-management/features/virt/autoinstall-windows-drivers.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2907/develop/release-management/features/virt/autoinstall-windows-drivers.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Automatic installation of Windows drivers" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"Automatic installation of Windows drivers","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2907/images/logo.svg"}},"url":"https://ovirt.github.io/ovirt-site/previews/2907/develop/release-management/features/virt/autoinstall-windows-drivers.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2907/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2907/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2907/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2907/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2907/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2907/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2907/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2907/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2907/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2907/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2907/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/2907/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/2907/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/2907/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/2907/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/2907/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2907/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2907/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2907/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2907/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2907/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2907/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2907//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2907//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2907/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2907/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2907/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2907/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2907/develop/release-management/features/virt/">
              <span property="name">Virt</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/1cbe657a4bee069d0b10b63100fd75ae?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/1cbe657a4bee069d0b10b63100fd75ae?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Tomáš Golembiovský</span></p>
                      
                    </section>
                  </span>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/2907/documentation/'>Documentation is available here.</a></div>

<h1 id="automatic-installation-of-windows-drivers">Automatic installation of Windows drivers</h1>

<h2 id="summary">Summary</h2>

<p>The feature simplifies the installation of MS Windows on a VM when virtio disk
and network drivers are used. oVirt provides a floppy with file
<code class="language-plaintext highlighter-rouge">Autounattend.xml</code> which tells the installer where to find the necessary virtio
drivers.</p>

<h2 id="motivation">Motivation</h2>

<p>The process of installing VM with MS Windows is complicated by the lack of
virtio drivers on the installation media. If the user wants to use virtio disk
and network during installation – which is suggested because of significant
speed improvement – he has to perform some preparatory steps. The user has to
manually load the virtio storage drivers and possibly also virtio network
drivers from the floppy disk in the initial phase of installation. This process
puts unnecessary burden on the user.</p>

<h2 id="automation">Automation</h2>

<p>The installation process of MS Windows can be automated by providing removable
media containing file called <code class="language-plaintext highlighter-rouge">Autounattend.xml</code>. The XML file allows automation
of many aspects of the installation. From answers to dialog questions to disk
partitioning to completely unattended installation.</p>

<p>In case of this feature we use it to tell Windows where it can find the
necessary drivers. The installer will then load the drivers automatically and
also installs them to the target OS. That way they are available during the
installation as well as on the first boot of the new system.</p>

<h2 id="how-to-use-the-feature">How to use the feature</h2>

<p>TBA (UX design is still in progress)</p>

<h2 id="details">Details</h2>

<p>First <em>osinfo</em> database will be modified to contain the directory with the
drivers. By default, the directories correspond to the paths as seen on the
floppy in <code class="language-plaintext highlighter-rouge">virtio-win</code> package.</p>

<p>Second, the auto-install floppy is created on the fly just before the VM is
started. The floppy image specified in <em>Run Once</em> dialog is copied to the
payload directory on VDSM and <code class="language-plaintext highlighter-rouge">Autounattend.xml</code> is injected onto it. The
<code class="language-plaintext highlighter-rouge">Autounattend.xml</code> is created from the template by replacing the path to the
drivers from <em>osinfo</em>. We cannot use single XML file because of bugs in drivers
loading code in Windows.</p>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2907/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2907/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2907/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2907/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/virt/autoinstall-windows-drivers.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/virt/autoinstall-windows-drivers.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
