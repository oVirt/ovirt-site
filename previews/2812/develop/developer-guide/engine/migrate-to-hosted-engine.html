<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Migrate to Hosted Engine | oVirt</title>
<meta name="generator" content="Jekyll v3.9.1" />
<meta property="og:title" content="Migrate to Hosted Engine" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/2812/develop/developer-guide/engine/migrate-to-hosted-engine.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/2812/develop/developer-guide/engine/migrate-to-hosted-engine.html" />
<meta property="og:site_name" content="oVirt" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Migrate to Hosted Engine" />
<meta name="twitter:site" content="@ovirt" />
<script type="application/ld+json">
{"description":"oVirt is a free open-source virtualization solution for your entire enterprise","@type":"WebPage","headline":"Migrate to Hosted Engine","url":"https://ovirt.github.io/ovirt-site/previews/2812/develop/developer-guide/engine/migrate-to-hosted-engine.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/2812/images/logo.svg"}},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/2812/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/2812/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/2812/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/2812/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/2812/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/2812/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2812/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2812/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2812/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2812/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/2812/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <!-- Begin Jekyll Favicon tag v0.2.9 -->
<!-- Classic -->
<link rel="shortcut icon" href="/ovirt-site/previews/2812/favicon.ico">
<link rel="icon" sizes="48x48 32x32 16x16" href="/ovirt-site/previews/2812/favicon.ico">
  <link rel="icon" sizes="16x16" type="image/png" href="/ovirt-site/previews/2812/images/favicon-16x16.png">
  <link rel="icon" sizes="32x32" type="image/png" href="/ovirt-site/previews/2812/images/favicon-32x32.png">
  <link rel="icon" sizes="64x64" type="image/png" href="/ovirt-site/previews/2812/images/favicon-64x64.png">
  <link rel="icon" sizes="144x144" type="image/png" href="/ovirt-site/previews/2812/images/favicon-144x144.png">
<!-- Safari -->
  <link rel="apple-touch-icon" sizes="57x57" href="/ovirt-site/previews/2812/images/favicon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/ovirt-site/previews/2812/images/favicon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/ovirt-site/previews/2812/images/favicon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/ovirt-site/previews/2812/images/favicon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/ovirt-site/previews/2812/images/favicon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/ovirt-site/previews/2812/images/favicon-180x180.png">
<!-- Chrome -->
  <link rel="icon" sizes="192x192" href="/ovirt-site/previews/2812/images/favicon-192x192.png">
  <link rel="icon" sizes="96x96" href="/ovirt-site/previews/2812/images/favicon-96x96.png">
  <link rel="icon" sizes="48x48" href="/ovirt-site/previews/2812/images/favicon-48x48.png">
<link rel="manifest" href="/ovirt-site/previews/2812/manifest.webmanifest">
<!-- IE -->
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ovirt-site/previews/2812/images/favicon-144x144.png">
<meta name='msapplication-config' content="/ovirt-site/previews/2812/browserconfig.xml">
<!-- End Jekyll Favicon tag -->
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/2812/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/2812/images/logo.svg">      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/2812/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2812/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/2812/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2812/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2812//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/2812//blogs.ovirt.org/'>Blog</a></li>              </ul>          </div>          <!-- /.navbar-collapse -->      </div>      <!-- /.container-fluid -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2812/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2812/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2812/develop/developer-guide/">
              <span property="name">Developer Guide</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/2812/develop/developer-guide/engine/">
              <span property="name">Engine</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <header class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/a29d28811a6b9fc71f135fc57cbb3ee4?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/a29d28811a6b9fc71f135fc57cbb3ee4?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy">
                  </div>
                  <span class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Yedidyah Bar David</span></p>
                      
                    </section>
                  </span>
                
              </header>
            </header>
          
        
        <section id="content" class="content container">
          
<h1 id="migrate-to-hosted-engine">Migrate to Hosted Engine</h1>

<p>An example showing how to migrate an existing engine installation to <a href="/ovirt-site/previews/2812/develop/release-management/features/sla/self-hosted-engine.html">Self Hosted Engine</a>, using <a href="/ovirt-site/previews/2812/develop/release-management/features/integration/engine-backup.html">backup/restore</a>.</p>

<h2 id="preparations">Preparations</h2>

<p>I had in the dns an A record ‘ovirttest.home.local’ and a CNAME record my-engine.home.local pointing to ovirttest.</p>

<p>I installed fedora 19 on a host (actually a VM) with hostname ‘ovirttest’.</p>

<p>I installed, using the nightly repo, ovirt-engine on ovirttest, ran ‘engine-setup’, and input as FQDN for the engine ‘my-engine.home.local’.</p>

<p>Now I wanted to migrate this installation to hosted engine.</p>

<h2 id="hosted-engine-deploy---part-one">Hosted engine deploy - part one</h2>

<p>I installed a new host with fedora 19, gave it hostname ‘didi-box1.home.local’.</p>

<p>Installed on it hosted engine. On didi-box1, added the nightly repos, and then:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # yum install ovirt-hosted-engine-setup
</code></pre></div></div>

<p>Now deploy it. On didi-box1:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # hosted-engine --deploy
  [ INFO  ] Stage: Initializing
            Continuing will configure this host for serving as hypervisor and create a VM where oVirt Engine will be installed afterwards.
            Are you sure you want to continue? (Yes, No)[Yes]:
  [ INFO  ] Generating a temporary VNC password.
  [ INFO  ] Stage: Environment setup
            Configuration files: []
            Log file: /var/log/ovirt-hosted-engine-setup/ovirt-hosted-engine-setup-20131111142620.log
            Version: otopi-1.2.0_master (otopi-1.2.0-0.0.master.20131105.git6a17a76.fc19)
  [ INFO  ] Hardware supports virtualization
  [ INFO  ] Stage: Environment packages setup
  [ INFO  ] Stage: Programs detection
  [ INFO  ] Stage: Environment setup
  [ INFO  ] Stage: Environment customization
            --== STORAGE CONFIGURATION ==--
            During customization use CTRL-D to abort.
            Please specify the storage you would like to use (glusterfs, nfs)[nfs]:
            Please specify the full shared storage connection path to use (example: host:/path): didi-lap:/vm/he1
  [ INFO  ] Installing on first host
            Please provide storage domain name [hosted_storage]:
            Local storage datacenter name [hosted_datacenter]:
            --== SYSTEM CONFIGURATION ==--
            --== NETWORK CONFIGURATION ==--
            Please indicate a nic to set ovirtmgmt bridge on: (em1) [em1]:
            iptables was detected on your computer, do you wish setup to configure it? (Yes, No)[Yes]:
            Please indicate a pingable gateway IP address: 10.0.0.138
            --== VM CONFIGURATION ==--
            Please specify the device to boot the VM from (cdrom, disk, pxe) [cdrom]:
            The following CPU types are supported by this host:
                   - model_Westmere: Intel Westmere Family
                   - model_Nehalem: Intel Nehalem Family
                   - model_Penryn: Intel Penryn Family
                   - model_Conroe: Intel Conroe Family
            Please specify the CPU type to be used by the VM [model_Westmere]:
            Please specify path to installation media you would like to use [None]: /iso/Fedora-18-x86_64-netinst.iso
            Please specify the number of virtual CPUs for the VM [Defaults to minimum requirement: 2]:
            Please specify the disk size of the VM in GB [Defaults to minimum requirement: 25]:
            Please specify the memory size of the VM in MB [Defaults to minimum requirement: 4096]:
            Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]:
            --== HOSTED ENGINE CONFIGURATION ==--
            Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]:
            Enter 'admin@internal' user password that will be used for accessing the Administrator Portal:
            Confirm 'admin@internal' user password:
            Please provide the FQDN for the engine you would like to use. This needs to match the FQDN that you will use for the engine installation within the VM: my-engine.home.local
  [ INFO  ] Stage: Setup validation
            --== CONFIGURATION PREVIEW ==--
            Bridge interface                   : em1
            Engine FQDN                        : my-engine.home.local
            Bridge name                        : ovirtmgmt
            SSH daemon port                    : 22
            Firewall manager                   : iptables
            Gateway address                    : 10.0.0.138
            Host name for web application      : hosted_engine_1
            Host ID                            : 1
            Image size GB                      : 25
            Storage connection                 : didi-lap:/vm/he1
            Console type                       : vnc
            Memory size MB                     : 4096
            Boot type                          : cdrom
            Number of CPUs                     : 2
            ISO image (for cdrom boot)         : /iso/Fedora-18-x86_64-netinst.iso
            CPU Type                           : model_Westmere
            Please confirm installation settings (Yes, No)[No]: yes
  [ INFO  ] Generating answer file '/etc/ovirt-hosted-engine/answers.conf'
  [ INFO  ] Stage: Transaction setup
  [ INFO  ] Stage: Misc configuration
  [ INFO  ] Stage: Package installation
  [ INFO  ] Stage: Misc configuration
  [ INFO  ] Configuring libvirt
  [ INFO  ] Generating VDSM certificates
  [ INFO  ] Configuring VDSM
  [ INFO  ] Starting vdsmd
  [ INFO  ] Waiting for VDSM hardware info
  [ INFO  ] Configuring the management bridge
  [ INFO  ] Creating Storage Domain
  [ INFO  ] Creating Storage Pool
  [ INFO  ] Connecting Storage Pool
  [ INFO  ] Verifying sanlock lockspace initialization
  [ INFO  ] Initializing sanlock lockspace
  [ INFO  ] Initializing sanlock metadata
  [ INFO  ] Creating VM Image
  [ INFO  ] Disconnecting Storage Pool
  [ INFO  ] Start monitoring domain
  [ INFO  ] Configuring VM
  [ INFO  ] Updating hosted-engine configuration
  [ INFO  ] Stage: Transaction commit
  [ INFO  ] Stage: Closing up
  [ INFO  ] Creating VM
            You can now connect to the VM with the following command:
                  /bin/remote-viewer vnc://localhost:5900
            Use temporary password "0494DEVS" to connect to vnc console.
            Please note that in order to use remote-viewer you need to be able to run graphical applications.
            This means that if you are using ssh you have to supply the -Y flag (enables trusted X11 forwarding).
            Otherwise you can run the command from a terminal in your preferred desktop environment.
            If you cannot run graphical applications you can connect to the graphic console from another host or connect to the console using the following command:
            virsh -c qemu+tls://didi-box1/system console HostedEngine
            If you need to reboot the VM you will need to start it manually using the command:
            hosted-engine --vm-start
            You can then set a temporary password using the command: `          hosted-engine --add-console-password=`&lt;password&gt;
            Please install the OS on the VM.
            When the installation is completed reboot or shutdown the VM: the system will wait until then
</code></pre></div></div>

<p>At this point I connected to the console of the new machine, using:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  % remote-viewer vnc://didi-box1:5900
</code></pre></div></div>

<p>and the temporary password shown above, and continued the installation of fedora 19 on the new VM. I configured its hostname to be ‘he1vm.home.local’. When the installation finished, I pressed ‘Reboot’, and then, on the console where I ran ‘hosted-engine –deploy’ on didi-box1, I continued:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            Has the OS installation been completed successfully?
            Answering no will allow you to reboot from the previously selected boot media. (Yes, No)[Yes]:  
  [ INFO  ] Creating VM
            You can now connect to the VM with the following command:
                  /bin/remote-viewer vnc://localhost:5900
            Use temporary password "0494DEVS" to connect to vnc console.
            Please note that in order to use remote-viewer you need to be able to run graphical applications.
            This means that if you are using ssh you have to supply the -Y flag (enables trusted X11 forwarding).
            Otherwise you can run the command from a terminal in your preferred desktop environment.
            If you cannot run graphical applications you can connect to the graphic console from another host or connect to the console using the following command:
            virsh -c qemu+tls://didi-box1/system console HostedEngine
            If you need to reboot the VM you will need to start it manually using the command:
            hosted-engine --vm-start
            You can then set a temporary password using the command: `          hosted-engine --add-console-password=`&lt;password&gt;
            Please install the engine in the VM, hit enter when finished.
</code></pre></div></div>

<h2 id="hosted-engine-deploy---part-two">hosted engine deploy - part two</h2>

<p>Now I connected to the vm with:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  % ssh root@he1vm.home.local
</code></pre></div></div>

<p>On he1vm, after enabling the ovirt nightly repo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # yum install ovirt-engine
</code></pre></div></div>

<h3 id="the-cutoff-point">The cutoff point</h3>

<p>Now suppose we are ready to do the cutoff. We stop the engine on the old machine, backup, restore on the new machine, and setup there. Note that running backup does not require the engine to be down, but we do not want users to make changes in the old machine that will not be copied to the new one. We also do not want both the old and the new engines to try and manage the same existing hosts and VMs.</p>

<p>On ovirttest, we stop the engine:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # service ovirt-engine stop
</code></pre></div></div>

<p>We should also prevent the service from starting on a reboot. This can be done with</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # service ovirt-engine disable
</code></pre></div></div>

<p>for fedora 19, or, for el6 machines, with</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # chkconfig ovirt-engine off
</code></pre></div></div>

<p>We update our dns to point the name ‘my-engine.example.com’ to the IP address of the new VM ‘he1vm’. Alternatively, if we did not have separate dns entries ‘ovirttest’ and ‘my-engine’, but just e.g. ‘my-engine’, we’ll probably want to change the entry ‘my-engine’ to ‘old-my-engine’ and create a new entry ‘my-engine’ pointing at the address of ‘he1vm’.</p>

<p>Then we backup, still on ovirttest:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # engine-backup --mode=backup --file=backup1 --log=backup1.log
</code></pre></div></div>

<p>Copy backup1 from ovirttest to oe1vm. E.g., on ovirttest:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # scp -p backup1 he1vm:
</code></pre></div></div>

<p>Then restore the backup using a database we already created on another machine. On he1vm:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # engine-backup --mode=restore --file=backup1 --log=backup1-restore.log --change-db-credentials --db-host=didi-lap --db-user=engine --db-password --db-name=engine
</code></pre></div></div>

<p>This will require manual preparation work of configuring postgresql and creating a user/database if using a local database, which is the default. For more details see <a href="/ovirt-site/previews/2812/develop/release-management/features/integration/engine-backup.html">backup/restore</a>.</p>

<p>This restores files and the database, but still does not start the service nor does other stuff which is normally done by setup.</p>

<p>Note that you can also create a local database and restore to it. You’ll then still need to manually enable postgresql to start on reboot and open the firewall to be able to access it.</p>

<p>Next, run engine-setup. It will identify the existing files and database and do an “upgrade”, including fixing around stuff that restore does not do. Still on he1vm:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # engine-setup
  [ INFO  ] Stage: Initializing
  [ INFO  ] Stage: Environment setup
            Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging.conf', '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf']
            Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20131111102015.log
            Version: otopi-1.2.0_master (otopi-1.2.0-0.0.master.20131105.git6a17a76.fc18)
  [ INFO  ] Stage: Environment packages setup
  [ INFO  ] Stage: Programs detection
  [ INFO  ] Stage: Environment setup
  [ INFO  ] Stage: Environment customization
            --== PACKAGES ==--
  [ INFO  ] Checking for product updates...
  [ INFO  ] No product updates found
            --== NETWORK CONFIGURATION ==--
            --== DATABASE CONFIGURATION ==--
            Using existing credentials
            --== OVIRT ENGINE CONFIGURATION ==--
            Skipping storing options as database already prepared
            --== PKI CONFIGURATION ==--
            PKI is already configured
            --== APACHE CONFIGURATION ==--
            --== SYSTEM CONFIGURATION ==--
            --== END OF CONFIGURATION ==--
  [ INFO  ] Stage: Setup validation
  [WARNING] Less than 16384MB of memory is available
  [ INFO  ] Cleaning stale zombie tasks
            --== CONFIGURATION PREVIEW ==--
            Database name                      : engine
            Database secured connection        : False
            Database host                      : didi-lap
            Database user name                 : engine
            Database host name validation      : False
            Datbase port                       : 5432
            NFS setup                          : False
            Firewall manager                   : firewalld
            Configure WebSocket Proxy          : False
            Host FQDN                          : my-engine.home.local
            Set application as default page    : True
            Configure Apache SSL               : True
            Please confirm installation settings (OK, Cancel) [OK]:
  [ INFO  ] Cleaning async tasks and compensations
  [ INFO  ] Checking the DB consistency
  [ INFO  ] Stage: Transaction setup
  [ INFO  ] Stopping engine service
  [ INFO  ] Stopping websocket-proxy service
  [ INFO  ] Stage: Misc configuration
  [ INFO  ] Fixing DB inconsistencies
  [ INFO  ] Stage: Package installation
  [ INFO  ] Stage: Misc configuration
  [ INFO  ] Backing up database to '/var/lib/ovirt-engine/backups/engine-20131111102210.hRulo6.sql'.
  [ INFO  ] Updating database schema
  [ INFO  ] Generating post install configuration file '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf'
  [ INFO  ] Stage: Transaction commit
  [ INFO  ] Stage: Closing up
            --== SUMMARY ==--
  [WARNING] Less than 16384MB of memory is available
            SSH fingerprint: A8:9D:9F:B0:0A:2A:35:FF:9C:D7:6D:92:1E:0B:4A:B4
            Internal CA A4:D1:D1:B0:97:02:5F:1D:08:ED:F0:43:F6:96:2F:54:03:AD:30:4A
            Web access is enabled at: `              `[`http://my-engine.home.local:80/ovirt-engine`](http://my-engine.home.local:80/ovirt-engine) `              `[`https://my-engine.home.local:443/ovirt-engine`](https://my-engine.home.local:443/ovirt-engine)
            --== END OF SUMMARY ==--
  [ INFO  ] Starting engine service
  [ INFO  ] Restarting httpd
  [ INFO  ] Generating answer file '/var/lib/ovirt-engine/setup/answers/20131111102241-upgrade.conf'
  [ INFO  ] Stage: Clean up
            Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20131111102015.log
  [ INFO  ] Stage: Pre-termination
  [ INFO  ] Stage: Termination
  [ INFO  ] Execution of upgrade completed successfully
</code></pre></div></div>

<p>Then we go back to the console where we ran ‘hosted-engine –deploy’, on didi-box1:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            Please install the engine in the VM, hit enter when finished.
  [ INFO  ] Engine replied: DB Up!Welcome to Health Status!
  [ INFO  ] Waiting for the host to become operational in the engine. This may take several minutes...
  [ INFO  ] The VDSM Host is now operational
            Please shutdown the VM allowing the system to launch it as a monitored service.
            The system will wait until the VM is down.
</code></pre></div></div>

<p>Now we go back to he1vm and reboot it. On he1vm:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # reboot
</code></pre></div></div>

<p>Then, on the console where we ran ‘hosted-engine –deploy’, on didi-box1:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            The system will wait until the VM is down.
  [ INFO  ] Enabling and starting HA services
            Hosted Engine successfully set up
  [ INFO  ] Stage: Clean up
  [ INFO  ] Stage: Pre-termination
  [ INFO  ] Stage: Termination
</code></pre></div></div>

<p>That’s it. If we now point a browser at <strong>https://my-engine.home.local/ovirt-engine/</strong> , we can login to the web admin interface, and in addition to our existing data, we’ll also find a host called ‘hosted_engine_1’ and a VM called ‘HostedEngine’.</p>




        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/2812/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/2812/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/2812/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/2812/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/developer-guide/engine/migrate-to-hosted-engine.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/master/source/develop/developer-guide/engine/migrate-to-hosted-engine.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
