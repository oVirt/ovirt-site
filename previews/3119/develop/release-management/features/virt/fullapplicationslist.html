<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>FullApplicationsList | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="FullApplicationsList" />
<meta name="author" content="Ewoud Kohl van Wijngaarden" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3119/develop/release-management/features/virt/fullapplicationslist.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3119/develop/release-management/features/virt/fullapplicationslist.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="FullApplicationsList" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Ewoud Kohl van Wijngaarden" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Ewoud Kohl van Wijngaarden"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"FullApplicationsList","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3119/images/logo.svg"},"name":"Ewoud Kohl van Wijngaarden"},"url":"https://ovirt.github.io/ovirt-site/previews/3119/develop/release-management/features/virt/fullapplicationslist.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3119/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3119/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3119/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3119/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3119/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3119/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3119/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3119/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3119/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3119/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3119/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3119/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3119/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3119/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3119/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3119/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3119/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3119/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3119/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3119/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3119/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3119/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3119//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3119//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3119/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3119/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3119/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3119/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3119/develop/release-management/features/virt/">
              <span property="name">Virt</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/8c026e3f09c38f3f685f886fc95f1dc9?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/8c026e3f09c38f3f685f886fc95f1dc9?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Ewoud Kohl van Wijngaarden">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Ewoud Kohl van Wijngaarden</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/7b4c0edd2cb4368990e235df3fa3e300?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/7b4c0edd2cb4368990e235df3fa3e300?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Gal Hammer">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Gal Hammer</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3119/documentation/'>Documentation is available here.</a></div>

<h1 id="full-applications-list">Full Applications List</h1>

<h2 id="abstract">Abstract</h2>

<p>A requested feature to view all the installed packages on a VM in a way that scale well.</p>

<h2 id="the-current-workflow">The current workflow</h2>

<p>The guest agent queries the operating system in order to build a list of the installed applications (rpmdb on Linux and the registry on Windows). On Linux the agent have a configuration settings that determine which applications will be reported.</p>

<p>The whole list is reported every 120 seconds. The value is defined in the configuration.</p>

<p>The VDSM store the applications list in memory.</p>

<p>The backend queries VDSM every 2 seconds to receive a subset of the Vms status. The backend queries VDSM every 10 seconds to receive a full Vms status. This report includes the applications list.</p>

<h2 id="the-problems">The problems</h2>

<p>The agent query the operating system every time it need to information.</p>

<p>A RHEL installation with ~900 packages installed will require about 45 Kb (name, version and some protocol overhead) per VM. This mean that on a host, running ~1000 Vms, will have a network throughput of ~4.5 Mb per second. Reporting the same data over and over again. It also mean that vdsm will use a memory size of ~100Mb for holding the list.</p>

<h2 id="the-solution">The solution</h2>

<p>The applications list will be reported on the following scenarios:</p>

<ol>
  <li>Remove: On agent startup.</li>
  <li>On a ‘refresh’ request from vdsm.</li>
  <li>A modification event (rpmdb packages file change on Linux and registry change on Windows). When this event is set the agent will wait a period of one minute. If during that minute no more events will occur the agent will create a new applications list and will report it to vdsm.</li>
</ol>

<p>The agent’s Windows version will continue to report the same applications list.</p>

<p>The vdsm will use the existing “hash” field to the short Vm stats information. The hash is updated to indicate that an update list is available.</p>

<p>The vdsm will store the application list in a file. The file will be read if the list is requested. This will eliminate the memory cost of store the full list for all Vms.</p>

<p>The backend will need to examine the value of the “hash” field. If the value was changed it should perform another request in order to receive the full applications list. This is the same behavior as the new implementation which pull the Ethernet’s information.</p>

<p><a href="/ovirt-site/previews/3119/develop/release-management/features/">Category:Featurea</a></p>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3119/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3119/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3119/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3119/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2023 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/virt/fullapplicationslist.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/virt/fullapplicationslist.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
