<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PosixFSConnection | oVirt</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="PosixFSConnection" />
<meta name="author" content="Ayal Baron" />
<meta property="og:locale" content="en" />
<meta name="description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<meta property="og:description" content="oVirt is a free open-source virtualization solution for your entire enterprise" />
<link rel="canonical" href="https://ovirt.github.io/ovirt-site/previews/3014/develop/release-management/features/storage/posixfsconnection.html" />
<meta property="og:url" content="https://ovirt.github.io/ovirt-site/previews/3014/develop/release-management/features/storage/posixfsconnection.html" />
<meta property="og:site_name" content="oVirt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PosixFSConnection" />
<meta name="twitter:site" content="@ovirt" />
<meta name="twitter:creator" content="@Ayal Baron" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Ayal Baron"},"description":"oVirt is a free open-source virtualization solution for your entire enterprise","headline":"PosixFSConnection","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ovirt.github.io/ovirt-site/previews/3014/images/logo.svg"},"name":"Ayal Baron"},"url":"https://ovirt.github.io/ovirt-site/previews/3014/develop/release-management/features/storage/posixfsconnection.html"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="/ovirt-site/previews/3014/stylesheets/fonts.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel="stylesheet" href="/ovirt-site/previews/3014/stylesheets/application.css" />
  <link rel="stylesheet" href="/ovirt-site/previews/3014/stylesheets/print.css" media="print" />
  <link rel="stylesheet" href="/ovirt-site/previews/3014/stylesheets/coderay.css" media="screen" />
  <link rel="stylesheet" href="/ovirt-site/previews/3014/stylesheets/asciidoc.css" />
  <script src="/ovirt-site/previews/3014/javascripts/vendor/jquery.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3014/javascripts/vendor/bootstrap.min.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3014/javascripts/vendor/bootstrap-sortable.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3014/javascripts/vendor/moment.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3014/javascripts/vendor/fullcalendar/fullcalendar.js" type="text/javascript"></script>
  <script src="/ovirt-site/previews/3014/javascripts/lib/cal-widget.js" type="text/javascript"></script>
  <link href='/ovirt-site/previews/3014/favicon.ico' rel='shortcut icon' sizes='36x36 24x24 16x16' type='image/x-icon'/>
<link href='/ovirt-site/previews/3014/favicon.png' rel='icon' sizes='196x196' type='image/png'/>
<meta content='/ovirt-site/previews/3014/mstile-icon-128x128.png' name='msapplication-TileImage'/>
<meta content='transparent' name='msapplication-TileColor'/>
<link href='/ovirt-site/previews/3014/manifest.webmanifest' rel='manifest'/>
<meta content='/ovirt-site/previews/3014/browserconfig.xml' name='msapplication-config'/>
</head>
<body class=""><header class='masthead hidden-print' id='branding' role='banner'><section class='hgroup'></section><div id='access'><nav id="mainNav" class="navbar navbar-fixed-top affix-top">  <div class="container">    <div class="col-sm-2 navbar-header">      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_id0980fddf">        <span class="sr-only">Toggle navigation</span>        <span>Menu</span>        <span class="fa fa-bars"></span>      </button>      <a class="navbar-brand" href="/ovirt-site/previews/3014/">        <img id="logo" alt="oVirt" src="/ovirt-site/previews/3014/images/logo.svg" />      </a>    </div>    <!-- Collect the nav links, forms, and other content for toggling -->    <div class="col-sm-10">      <div class="navbar-collapse collapse" id="menu_id0980fddf">        <ul class="nav navbar-nav" role="menubar">          <li class="hidden active">            <a href="#page-wrap"></a>          </li><li role='menuitem'>  <a href='/ovirt-site/previews/3014/download/'>Download</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3014/documentation/'>Documentation</a></li><li class='active' role='menuitem'>  <a href='/ovirt-site/previews/3014/develop/'>Developers</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3014/community/'>Community</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3014//lists.ovirt.org/archives/'>Forum</a></li><li role='menuitem'>  <a href='/ovirt-site/previews/3014//blogs.ovirt.org/'>Blog</a></li>        </ul>      </div>      <!-- /.navbar-collapse -->    </div>  </div></nav></div></header><main id="page-wrap" class="page-wrap" aria-label="Content">
      <section id="page" class="page">
        <!-- adapted from https://github.com/git-no/jekyll-breadcrumbs -->
<nav class="breadcrumbs bootstrap hidden-sm-down" aria-label="breadcrumb">

   <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3014/">
              <span property="name"></span>
              <meta property="position" content="1" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3014/develop/">
              <span property="name">Developers Community</span>
              <meta property="position" content="2" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3014/develop/release-management/">
              <span property="name">Release Management</span>
              <meta property="position" content="3" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3014/develop/release-management/features/">
              <span property="name">Features (Design documents)</span>
              <meta property="position" content="4" />
           </a>
        </li>
      
        
        
        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
           <a property="item" typeof="WebPage" href="/ovirt-site/previews/3014/develop/release-management/features/storage/">
              <span property="name">Storage</span>
              <meta property="position" content="5" />
           </a>
        </li>
      
        
        
          

   </ol>

</nav>

        
          
            <header class="post-header col-md-4 pad-sides well well-lg">
              <h2 class="post-title entry-title">Authors:</h2>
              <div class="post-meta">
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/a283ddeeff169a8d3dbc71a3d6d3a2e5?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/a283ddeeff169a8d3dbc71a3d6d3a2e5?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Ayal Baron">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Ayal Baron</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/93875e42e9b962947becb4e425504fab?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/93875e42e9b962947becb4e425504fab?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Daniel Erez">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Daniel Erez</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/ebbb2bb1935ae8d3235d20a4221769ee?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/ebbb2bb1935ae8d3235d20a4221769ee?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Einav Cohen">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Einav Cohen</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/8c026e3f09c38f3f685f886fc95f1dc9?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/8c026e3f09c38f3f685f886fc95f1dc9?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Ewoud Kohl van Wijngaarden">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Ewoud Kohl van Wijngaarden</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/65fafd7adcef0c369b149759491fae7f?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/65fafd7adcef0c369b149759491fae7f?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Sandro Bonazzola">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard"><a rel="author" href="https://twitter.com/sandrobonazzola" title="Sandro Bonazzola">Sandro Bonazzola</a></span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/fdf1234a96717595a057d4edb7258da2?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/fdf1234a96717595a057d4edb7258da2?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Saggi Mizrahi">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Saggi Mizrahi</span></p>
                      
                    </section>
                  </div>
                
                  
                  
                  
                  <div class="blogger_avatar">
                    <img
                      src="https://secure.gravatar.com/avatar/cf9b98d6d79d0dd07d167017789bac45?s=32&amp;d=mm&amp;r=g"
                      srcset="https://secure.gravatar.com/avatar/cf9b98d6d79d0dd07d167017789bac45?s=64&amp;d=mm&amp;r=g 2x"
                      class="avatar avatar-32 photo"
                      height="32"
                      width="32"
                      loading="lazy"
                      alt="avatar of Yair Zaslavsky">
                  </div>
                  <div class="byline">
                    <section class="entry-meta">
                      
                        <p><span class="author vcard">Yair Zaslavsky</span></p>
                      
                    </section>
                  </div>
                
                </div>
            </header>
          
        
        <section id="content" class="content container">
          <div class='alert alert-warning'>Feature pages are design documents that developers have created while collaborating on oVirt.<br><br>Most of them are&nbsp;<strong>outdated</strong>, but provide historical design context.<br><br>They are&nbsp;<strong>not</strong>&nbsp;user documentation and should not be treated as such.<br><br><a href='/ovirt-site/previews/3014/documentation/'>Documentation is available here.</a></div>

<p>Also known as SharedFS support</p>

<h1 id="posixfs-connection">PosixFS Connection</h1>

<h1 id="summary">Summary</h1>

<p>This feature will allow to define a DC of a customizable type.
The storage domains in this DC will be mounted with custom properties and will support file system based storage domains which do not necessarily rely on NFS.</p>

<h1 id="current-status">Current Status</h1>

<p>To do:</p>

<ul>
  <li>Make needed change in Ovirt-Engine</li>
  <li>Make needed change in the GUIs</li>
</ul>

<p>Done:</p>

<ul>
  <li>Make needed changes in VDSM (<a href="http://gerrit.ovirt.org/559">http://gerrit.ovirt.org/559</a>)</li>
</ul>

<h1 id="description">Description</h1>

<p>Currently VDSM only supports using NFS as a remote domain target. This feature will allow VDSM to use any mountable target that adheres to posix file semantics to be used in VDSM as a domain.</p>

<p>This will not replace specialized support but rather compliment. The underlying implementation will only adhere to posix semantics and will ignore quirks and hacks needed by any random target. This is why it is highly recommended to use a the specialized domain types when available.</p>

<h1 id="dependency">Dependency</h1>

<p>None</p>

<h1 id="related-features">Related Features</h1>

<p>Features/ConnectionMonitoring</p>

<h1 id="affected-functionality">Affected Functionality</h1>

<ul>
  <li>storage domain creation\connection\removal - It is now possible to specify a new connection type</li>
</ul>

<h1 id="user-experience">User Experience</h1>

<p>User should be able to witness the wonders of this new functionality</p>

<h1 id="upgrade">Upgrade</h1>

<p>Just works!</p>

<h1 id="how-to-use">How to use</h1>

<p>The new connection type is named “posixfs” and its TypeID is 6.
The connection specific arguments are:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">spec</code>- <em>Mandatory</em>, <em>string</em>, This field describes the block special device or remote filesystem to be mounted. For ordinary mounts it will hold (a link to) a block special device node (as created by mknod(8)) for the device to be mounted, like <code class="language-plaintext highlighter-rouge">/dev/cdrom</code> or <code class="language-plaintext highlighter-rouge">/dev/sdb7</code>. For NFS mounts one will have <code class="language-plaintext highlighter-rouge">&lt;host&gt;:&lt;dir&gt;</code>, e.g., <code class="language-plaintext highlighter-rouge">knuth.aeb.nl:/</code>.</p>
  </li>
  <li><code class="language-plaintext highlighter-rouge">vfsType</code> - <em>Mandatory</em>, <em>string</em>, This field describes the type of the filesystem. Linux supports lots of filesystem types, such as adfs, affs, autofs, coda, coherent, cramfs, devpts, efs, ext2, ext3, hfs, hpfs, iso9660, jfs, minix, msdos, ncpfs, nfs, ntfs, proc, qnx4, reiserfs, romfs, smbfs, sysv, tmpfs, udf, ufs, umsdos, vfat, xenix, xfs, and possibly others.</li>
  <li><code class="language-plaintext highlighter-rouge">options</code> - <em>Optional</em>, <em>string</em>, This field describes the mount options associated with the filesystem. It is formatted as a comma separated list of options. It contains at least the type of mount plus any additional options appropriate to the filesystem type.</li>
</ul>

<p>For complete documentation you could look at `man fstab`</p>

<p>When creating a domain pass the posixfs type id to create a posixfs domain.</p>

<h1 id="user-work-flows">User work flows</h1>

<p>User will be able to connect to said target and enter specialized parameters.</p>

<h1 id="changes-in-ovirt-engine">Changes in ovirt engine</h1>

<p>This part is for engine-core</p>

<ul>
  <li>The connection arguments will be introduced as fields to the storage_server_connection class.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">spec</code> will be mapped to the existing “connection” field</li>
      <li><code class="language-plaintext highlighter-rouge">vfsType</code> will be added as a new field of String</li>
      <li><code class="language-plaintext highlighter-rouge">mountOptions</code> will be added as a new field of String</li>
    </ul>
  </li>
  <li>The new fields will be mapped to proper columns at the storage_server_connections, and necessary changes to the Spring-JDBC mapper should be introduced.</li>
  <li>A new storage type named POSIXFS should be introduced (supported by a new StorageHelper class).</li>
  <li>As the storage type should be set to 6 (to reflect the domainType) , and this value is already being used by the StorageType.All constant - the value of StorageType.All constant (which is not used by VDSM) should be changed (also for persistent connections, using an upgrade script).</li>
  <li>ConnectStorageServerVDSCommand.CreateStructFromConnection should be changed in order to add the new fields to the connection, as sent to the Connect VDSM verb (see <a href="http://gerrit.ovirt.org/559">http://gerrit.ovirt.org/559</a>)</li>
  <li>A new configuration value named “PosixFSSupportEnabled” will be added (boolean value) set to true for version 3.1 and false for the other versions.</li>
  <li>A validation to check compatibility level is 3.1 and above should be added to the following commands, in case a connection includes POSIX FS information
    <ul>
      <li>AddStorageServerConnection</li>
      <li>AddStorageDomain</li>
    </ul>
  </li>
  <li>A validation check to check compatibility level is 3.1 and above should be added to AddEmptyStoragePool for the case of StorageType.POSIX</li>
</ul>

<h1 id="changes-in-api">Changes in API</h1>

<p>This part is for api.</p>

<ul>
  <li>StorageDomain will have the following new attributes:
    <ul>
      <li>String VfsType (mandatory only if StorageType is POSIXFS)</li>
      <li>String MountOptions (optional)</li>
    </ul>
  </li>
  <li>The attribute “Path” will be mapped to storage_server_connections.connection attribute.</li>
  <li>StorageType will have a new literal value of POSIXFS</li>
</ul>

<h1 id="changes-in-gui">Changes in GUI</h1>

<p><img src="/ovirt-site/previews/3014/images/wiki/Posixfsnewdatacenterdialog.png" alt="" />
<img src="/ovirt-site/previews/3014/images/wiki/Posixfsnewdomaindialog.png" alt="" /></p>

<p><a href="/ovirt-site/previews/3014/develop/release-management/features/">PosixFSConnection</a>
<a href="/ovirt-site/previews/3014/develop/release-management/releases/3.3/feature.html">PosixFSConnection</a></p>



        </section>
      </section>
    </main>

    <script src="/ovirt-site/previews/3014/javascripts/lib/headings_anchors.js" type="text/javascript"></script><footer class='text-center' id='footer'><hr class='visible-print'><ul class='footer-nav-list'><li><a href='/ovirt-site/previews/3014/privacy-policy.html' target='_blank' title='Privacy policy'>Privacy policy</a></li><li><a href='/ovirt-site/previews/3014/community/about.html' target='_blank' title='About'>About</a></li><li><a href='/ovirt-site/previews/3014/general-disclaimer.html' target='_blank' title='Disclaimers'>Disclaimers</a></li></ul>&copy; 2013&ndash;2022 oVirt<div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/develop/release-management/features/storage/posixfsconnection.html&amp;template=' target='_blank' title='Report an issue'><i class="icon fab fa-github"></i>Report an issue with this page</a></div><div class='edit-this-page'><a href='https://github.com/oVirt/ovirt-site/edit/main/source/develop/release-management/features/storage/posixfsconnection.md' target='_blank' title='Edit this page'><i class="icon fab fa-github"></i>Edit this page</a></div></footer></body>

</html>
